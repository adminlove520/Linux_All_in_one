<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL å®‰è£…å’Œé…ç½® | Linux_All_in_one</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/Linux_All_in_one/favicon.ico">
    <meta name="description" content="Linux è¿ç»´ã€è½¯ä»¶è¿ç»´ã€Docker æ•™ç¨‹ã€ç½‘ç»œå®‰å…¨">
    
    <link rel="preload" href="/Linux_All_in_one/assets/css/0.styles.407428ab.css" as="style"><link rel="preload" href="/Linux_All_in_one/assets/js/app.4a61619a.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/2.ee3c5eb7.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/1.bc260717.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/79.48030292.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/21.f8578145.js" as="script"><link rel="prefetch" href="/Linux_All_in_one/assets/js/100.5e0212b4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/101.280ba6c4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/102.fcbe69ef.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/103.59b3bf86.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/104.628bb6be.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/105.f6a0a62b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/106.53648c35.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/107.093c4fab.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/108.f8895b2f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/109.878b5e6d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/110.e7dbd5ce.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/12.4bdd7f50.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/13.4850c8c8.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/14.66e24ed5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/15.41d57e79.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/16.96600c16.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/17.1cd68a21.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/18.f54ebd77.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/19.36d25975.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/20.0120ca8c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/22.9efa850b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/23.d7f5441c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/24.1cabd94c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/25.2cb5712a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/26.440ab754.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/27.94e60af2.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/28.f1611369.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/29.730dead3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/3.accc0318.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/30.f69c3378.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/31.be2478fc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/32.9465ce70.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/33.f4c85e8a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/34.c3a0ece1.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/35.a75dd538.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/36.da0b8594.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/37.c49eb234.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/38.16f7d0e5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/39.ba6e47f0.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/4.9736648b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/40.664ddb58.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/41.4189f6ca.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/42.6472b832.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/43.c8d06688.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/44.e39a047e.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/45.39945860.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/46.ccbd9cdc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/47.9bed3a75.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/48.05ecd397.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/49.4f2f2874.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/5.9a4eb5c9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/50.d01632db.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/51.ad40e5f5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/52.bfacfa08.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/53.9398692c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/54.b34cb199.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/55.6735c148.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/56.575312d7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/57.d54f0ac7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/58.f3cc4cf5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/59.881dba8f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/6.a3475002.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/60.859faf8a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/61.4efca474.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/62.578a9742.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/63.95e6ff4f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/64.054ab297.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/65.5be33d9b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/66.2312529e.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/67.81dd084d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/68.a11966f3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/69.ffbf7d57.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/7.b4d90be9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/70.51883659.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/71.9ff55cae.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/72.d54e184f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/73.5062fbf7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/74.0721cccd.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/75.42dd3581.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/76.d590fa57.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/77.0e5953f3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/78.4bb79720.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/80.d036bc22.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/81.d6524746.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/82.93460687.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/83.7c6f2e4a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/84.83b1808d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/85.14c12ffc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/86.893b5c41.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/87.7d10879f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/88.ef12068f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/89.cc81e4e4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/90.130454fc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/91.838da398.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/92.22813cd9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/93.2000427b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/94.062717c8.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/95.9cc81974.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/96.0457546b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/97.71d6bbd5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/98.e6299973.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/99.b198a395.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~docsearch.00f0a528.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~flowchart.d07b8b19.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~notification.877bb3fc.js">
    <link rel="stylesheet" href="/Linux_All_in_one/assets/css/0.styles.407428ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Linux_All_in_one/" class="home-link router-link-active"><img src="/Linux_All_in_one/images/dunwu-logo-100.png" alt="Linux_All_in_one" class="logo"> <span class="site-name can-hide">Linux_All_in_one</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Linux_All_in_one/linux/cli/" class="nav-link">
  ğŸ’» Linux å‘½ä»¤
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/ops/" class="nav-link">
  âš™ï¸ Linux è¿ç»´
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/soft/" class="nav-link router-link-active">
  ğŸ“¦ Linux è½¯ä»¶è¿ç»´
</a></div><div class="nav-item"><a href="/Linux_All_in_one/docker/" class="nav-link">
  ğŸ³ Docker æ•™ç¨‹
</a></div><div class="nav-item"><a href="/Linux_All_in_one/Cybersecurity/" class="nav-link">
  ğŸ”’ Linuxä¸ç½‘ç»œå®‰å…¨
</a></div> <a href="https://github.com/adminlove520/Linux_All_in_one" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Linux_All_in_one/linux/cli/" class="nav-link">
  ğŸ’» Linux å‘½ä»¤
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/ops/" class="nav-link">
  âš™ï¸ Linux è¿ç»´
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/soft/" class="nav-link router-link-active">
  ğŸ“¦ Linux è½¯ä»¶è¿ç»´
</a></div><div class="nav-item"><a href="/Linux_All_in_one/docker/" class="nav-link">
  ğŸ³ Docker æ•™ç¨‹
</a></div><div class="nav-item"><a href="/Linux_All_in_one/Cybersecurity/" class="nav-link">
  ğŸ”’ Linuxä¸ç½‘ç»œå®‰å…¨
</a></div> <a href="https://github.com/adminlove520/Linux_All_in_one" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MySQL å®‰è£…å’Œé…ç½®</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#docker-å®‰è£…-mysql-ä¸å¸¦æŒ‚è½½" class="sidebar-link">Docker å®‰è£… MySQLï¼ˆä¸å¸¦æŒ‚è½½ï¼‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#docker-å®‰è£…-mysql-å¸¦æŒ‚è½½" class="sidebar-link">Docker å®‰è£… MySQLï¼ˆå¸¦æŒ‚è½½ï¼‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#mysql-5-5-å®‰è£…" class="sidebar-link">MySQL 5.5 å®‰è£…</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#mysql-5-6-å®‰è£…" class="sidebar-link">MySQL 5.6 å®‰è£…</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#mysql-5-7-yum-å®‰è£…" class="sidebar-link">MySQL 5.7 YUM å®‰è£…</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#mysql-é…ç½®" class="sidebar-link">MySQL é…ç½®</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#ä¿®æ”¹-root-è´¦å·å¯†ç " class="sidebar-link">ä¿®æ”¹ root è´¦å·å¯†ç </a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#è¿æ¥æŠ¥é”™-host-192-168-1-133-is-not-allowed-to-connect-to-this-mysql-server" class="sidebar-link">è¿æ¥æŠ¥é”™ï¼š&quot;Host '192.168.1.133' is not allowed to connect to this MySQL server&quot;</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#ä¿®æ”¹å¯†ç æŠ¥é”™-your-password-does-not-satisfy-the-current-policy-requirements" class="sidebar-link">ä¿®æ”¹å¯†ç æŠ¥é”™ï¼šYour password does not satisfy the current policy requirements</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#mysql-5-7" class="sidebar-link">MySQL 5.7</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#å°å†…å­˜æœºå­-mysql-é¢‘ç¹æŒ‚æ‰è§£å†³åŠæ³•-1g-centos-7-4" class="sidebar-link">å°å†…å­˜æœºå­ï¼ŒMySQL é¢‘ç¹æŒ‚æ‰è§£å†³åŠæ³•ï¼ˆ1G + CentOS 7.4ï¼‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#mysql-ä¸»ä»å¤åˆ¶" class="sidebar-link">MySQL ä¸»ä»å¤åˆ¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#ç¯å¢ƒè¯´æ˜å’Œæ³¨æ„ç‚¹" class="sidebar-link">ç¯å¢ƒè¯´æ˜å’Œæ³¨æ„ç‚¹</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#ä¸»åº“æœºå­æ“ä½œ" class="sidebar-link">ä¸»åº“æœºå­æ“ä½œ</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#ä»åº“æœºå­æ“ä½œ" class="sidebar-link">ä»åº“æœºå­æ“ä½œ</a></li></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/Mysql-Install-And-Settings.html#èµ„æ–™" class="sidebar-link">èµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql-å®‰è£…å’Œé…ç½®"><a href="#mysql-å®‰è£…å’Œé…ç½®" class="header-anchor">#</a> MySQL å®‰è£…å’Œé…ç½®</h1> <h2 id="docker-å®‰è£…-mysql-ä¸å¸¦æŒ‚è½½"><a href="#docker-å®‰è£…-mysql-ä¸å¸¦æŒ‚è½½" class="header-anchor">#</a> Docker å®‰è£… MySQLï¼ˆä¸å¸¦æŒ‚è½½ï¼‰</h2> <div class="language- extra-class"><pre class="language-text"><code>docker run \
	--name mysql-jira \
	--restart always \
	-p 3306:3306 \
	-e MYSQL_ROOT_PASSWORD=adg_123456 \
	-e MYSQL_DATABASE=jira_db \
	-e MYSQL_USER=jira_user \
	-e MYSQL_PASSWORD=jira_123456 \
	-d \
	mysql:5.7
</code></pre></div><ul><li>è¿ä¸Šå®¹å™¨ï¼š<code>docker exec -it mysql-jira /bin/bash</code> <ul><li>è¿ä¸Š MySQLï¼š<code>mysql -u root -p</code></li></ul></li> <li>è®¾ç½®ç¼–ç ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>SET NAMES 'utf8mb4';
alter database jira_db character set utf8mb4;
</code></pre></div><h2 id="docker-å®‰è£…-mysql-å¸¦æŒ‚è½½"><a href="#docker-å®‰è£…-mysql-å¸¦æŒ‚è½½" class="header-anchor">#</a> Docker å®‰è£… MySQLï¼ˆå¸¦æŒ‚è½½ï¼‰</h2> <ul><li>å…³æ‰ï¼šSELinux</li> <li>åˆ›å»ºæœ¬åœ°æ•°æ®å­˜å‚¨ + é…ç½®æ–‡ä»¶ç›®å½•ï¼š<code>mkdir -p /data/docker/mysql/datadir /data/docker/mysql/conf /data/docker/mysql/log</code></li> <li>åœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼š<code>vim /data/docker/mysql/conf/mysql-1.cnf</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code># è¯¥ç¼–ç è®¾ç½®æ˜¯æˆ‘è‡ªå·±é…ç½®çš„
[mysql]
default-character-set = utf8mb4

# ä¸‹é¢å†…å®¹æ˜¯ docker mysql é»˜è®¤çš„ start
[mysqld]
pid-file = /var/run/mysqld/mysqld.pid
socket = /var/run/mysqld/mysqld.sock
datadir = /var/lib/mysql
#log-error = /var/log/mysql/error.log
# By default we only accept connections from localhost
#bind-address = 127.0.0.1
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
# ä¸Šé¢å†…å®¹æ˜¯ docker mysql é»˜è®¤çš„ end

# ä¸‹é¢å¼€å§‹çš„å†…å®¹å°±æ˜¯æˆ‘è‡ªå·±é…ç½®çš„
log-error=/var/log/mysql/error.log
default-storage-engine = InnoDB
collation-server = utf8mb4_unicode_ci
init_connect = 'SET NAMES utf8mb4'
character-set-server = utf8mb4
lower_case_table_names = 1
max_allowed_packet = 50M
</code></pre></div><ul><li>èµ‹æƒï¼ˆé¿å…æŒ‚è½½çš„æ—¶å€™ï¼Œä¸€äº›ç¨‹åºéœ€è¦å®¹å™¨ä¸­çš„ç”¨æˆ·çš„ç‰¹å®šæƒé™ä½¿ç”¨ï¼‰ï¼š<code>chmod -R 777 /data/docker/mysql/datadir /data/docker/mysql/log</code></li> <li>èµ‹æƒï¼š<code>chown -R 0:0 /data/docker/mysql/conf</code> <ul><li>é…ç½®æ–‡ä»¶çš„èµ‹æƒæ¯”è¾ƒç‰¹æ®Šï¼Œå¦‚æœæ˜¯ç»™ 777 æƒé™ä¼šæŠ¥ï¼š[Warning] World-writable config file '/etc/mysql/conf.d/mysql-1.cnf' is ignoredï¼Œæ‰€ä»¥è¿™é‡Œè¦ç‰¹æ®Šå¯¹å¾…ã€‚å®¹å™¨å†…æ˜¯ç”¨ root çš„ uidï¼Œæ‰€ä»¥è¿™é‡Œä¸ä¹‹ç›¸åŒ¹é…èµ‹æƒå³å¯ã€‚</li> <li>æˆ‘æ˜¯è¿›å…¥å®¹å™¨ bash å†…ï¼Œè¾“å…¥ï¼š<code>whoami &amp;&amp; id</code>ï¼Œçœ‹åˆ°é»˜è®¤ç”¨æˆ·çš„ uid æ˜¯ 0ï¼Œæ‰€ä»¥è¿™é‡Œæ‰ chown 0</li></ul></li> <li><code>docker run -p 3306:3306 --name cloud-mysql -v /data/docker/mysql/datadir:/var/lib/mysql -v /data/docker/mysql/log:/var/log/mysql -v /data/docker/mysql/conf:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</code></li> <li>è¿ä¸Šå®¹å™¨ï¼š<code>docker exec -it cloud-mysql /bin/bash</code> <ul><li>è¿ä¸Š MySQLï¼š<code>mysql -u root -p</code></li> <li>åˆ›å»ºè¡¨ï¼š<code>CREATE DATABASE wormhole DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code></li></ul></li> <li>å…³äºå®¹å™¨çš„ MySQL é…ç½®ï¼Œå®˜ç½‘æ˜¯è¿™æ ·è¯´çš„ï¼š<a href="https://hub.docker.com/_/mysql/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/_/mysql/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><blockquote><p>The MySQL startup configuration is specified in the file /etc/mysql/my.cnf, and that file in turn includes any files found in the /etc/mysql/conf.d directory that end with .cnf.Settings in files in this directory will augment and/or override settings in /etc/mysql/my.cnf. If you want to use a customized MySQL configuration,you can create your alternative configuration file in a directory on the host machine and then mount that directory location as /etc/mysql/conf.d inside the mysql container.</p></blockquote></blockquote> <ul><li>å®¹å™¨ä¸­çš„ my.cnf å†…å®¹å¦‚ä¸‹ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code># Copyright (c) 2016, Oracle and/or its affiliates. All rights reserved.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA

!includedir /etc/mysql/conf.d/
!includedir /etc/mysql/mysql.conf.d/
</code></pre></div><ul><li>docker çš„ MySQL å¤‡ä»½å’Œè¿˜åŸï¼š
<ul><li>å¤‡ä»½ï¼š<code>docker exec cloud-mysql /usr/bin/mysqldump -u root --password=123456 DATABASE_Name &gt; /opt/backup.sql</code></li> <li>è¿˜åŸï¼š<code>docker exec -i cloud-mysql /usr/bin/mysql -u root --password=123456 DATABASE_Name &lt; /opt/backup.sql</code></li></ul></li></ul> <hr> <h2 id="mysql-5-5-å®‰è£…"><a href="#mysql-5-5-å®‰è£…" class="header-anchor">#</a> MySQL 5.5 å®‰è£…</h2> <ul><li><a href="https://blog.csdn.net/qingtian_1993/article/details/79692479" target="_blank" rel="noopener noreferrer">æ¥æº<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>è®¾ç½®ä»“åº“</li></ul> <div class="language- extra-class"><pre class="language-text"><code>rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm
rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm
</code></pre></div><ul><li>å®‰è£…ï¼š<code>yum install mysql55w mysql55w-server</code>ï¼Œç”¨åŒæ—¶ç”Ÿäº§ mysql çš„ç»„å’Œç”¨æˆ·</li> <li>å¯åŠ¨ï¼š<code>service mysqld start</code></li> <li>é‡ç½®å¯†ç ï¼š<code>mysqladmin -u root password '123456'</code></li> <li>é»˜è®¤é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/my.cnf</code></li> <li>log ç›®å½•ï¼š<code>cd /var/log/mysqld.log</code></li> <li>æŸ¥çœ‹æœåŠ¡ logï¼š<code>tail -300 /var/log/mysqld.log</code></li> <li>ç»™æŒ‡å®šç›®å½•å¢åŠ  mysql ç”¨æˆ·ç»„æƒé™ï¼š<code>chown mysql.mysql /var/run/mysqld/</code></li> <li>å®˜ç½‘ MySQL å¯åŠ¨å¤±è´¥ï¼Œè¿™ç¯‡æ–‡ç« ç»éªŒå€¼å¾—æ¨èï¼š<a href="https://www.cnblogs.com/ivictor/p/5146247.html" target="_blank" rel="noopener noreferrer">CentOS 7ä¸‹MySQLæœåŠ¡å¯åŠ¨å¤±è´¥çš„è§£å†³æ€è·¯<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <hr> <h2 id="mysql-5-6-å®‰è£…"><a href="#mysql-5-6-å®‰è£…" class="header-anchor">#</a> MySQL 5.6 å®‰è£…</h2> <ul><li>å‡è®¾å½“å‰ç”¨æˆ·ä¸ºï¼šroot</li> <li>Mysql å®‰è£…
<ul><li>å®˜ç½‘ï¼š<a href="http://www.mysql.com/" target="_blank" rel="noopener noreferrer">http://www.mysql.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>å®˜ç½‘ä¸‹è½½ï¼š<a href="http://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">http://dev.mysql.com/downloads/mysql/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>å®˜ç½‘ 5.5 ä¸‹è½½ï¼š<a href="http://dev.mysql.com/downloads/mysql/5.5.html#downloads" target="_blank" rel="noopener noreferrer">http://dev.mysql.com/downloads/mysql/5.5.html#downloads<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>å®˜ç½‘ 5.6 ä¸‹è½½ï¼š<a href="http://dev.mysql.com/downloads/mysql/5.6.html#downloads" target="_blank" rel="noopener noreferrer">http://dev.mysql.com/downloads/mysql/5.6.html#downloads<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>å®˜ç½‘ 5.7 ä¸‹è½½ï¼š<a href="http://dev.mysql.com/downloads/mysql/5.7.html#downloads" target="_blank" rel="noopener noreferrer">http://dev.mysql.com/downloads/mysql/5.7.html#downloads<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>å®˜ç½‘å¸®åŠ©ä¸­å¿ƒï¼š<a href="http://dev.mysql.com/doc/refman/5.6/en/source-installation.html" target="_blank" rel="noopener noreferrer">http://dev.mysql.com/doc/refman/5.6/en/source-installation.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>æ­¤æ—¶ï¼ˆ20160210ï¼‰ Mysql 5.5 æœ€æ–°ç‰ˆæœ¬ä¸ºï¼š<strong>5.5.48</strong></li> <li>æ­¤æ—¶ï¼ˆ20170130ï¼‰ Mysql 5.6 æœ€æ–°ç‰ˆæœ¬ä¸ºï¼š<strong>5.6.35</strong></li> <li>æ­¤æ—¶ï¼ˆ20160210ï¼‰ Mysql 5.7 æœ€æ–°ç‰ˆæœ¬ä¸ºï¼š<strong>5.7.11</strong></li> <li>æˆ‘ä¸ªäººä¹ æƒ¯ <code>/opt</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½• <code>setups</code> ç”¨æ¥å­˜æ”¾å„ç§è½¯ä»¶å®‰è£…åŒ…ï¼›åœ¨ <code>/usr</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>program</code> ç”¨æ¥å­˜æ”¾å„ç§è§£å‹åçš„è½¯ä»¶åŒ…ï¼Œä¸‹é¢çš„è®²è§£ä¹Ÿéƒ½æ˜¯åŸºäºæ­¤ä¹ æƒ¯</li> <li>æˆ‘ä¸ªäººå·²ç»ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹æºï¼š<code>EPELã€RepoForge</code>ï¼Œå¦‚æœä½ å‡ºç° <code>yum install XXXXX</code> å®‰è£…ä¸æˆåŠŸçš„è¯ï¼Œå¾ˆæœ‰å¯èƒ½å°±æ˜¯ä½ æ²¡æœ‰ç›¸å…³æºï¼Œè¯·æŸ¥çœ‹æˆ‘å¯¹æºè®¾ç½®çš„æ–‡ç« </li> <li>Mysql 5.6 ä¸‹è½½ï¼š<code>wget http://dev.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.35.tar.gz</code> ï¼ˆå¤§å°ï¼š31 Mï¼‰</li> <li>Mysql 5.7 ä¸‹è½½ï¼š<code>wget http://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.11.tar.gz</code> ï¼ˆå¤§å°ï¼š47 Mï¼‰</li> <li>æˆ‘ä»¬è¿™æ¬¡å®‰è£…ä»¥ 5.6 ä¸ºå®ä¾‹
<ul><li>è¿›å…¥ä¸‹è½½ç›®å½•ï¼š<code>cd /opt/setups</code></li> <li>è§£å‹å‹ç¼©åŒ…ï¼š<code>tar zxvf mysql-5.6.35.tar.gz</code></li> <li>ç§»åˆ°è§£å‹åŒ…ï¼š<code>mv /opt/setups/mysql-5.6.35 /usr/local/</code></li> <li>å®‰è£…ä¾èµ–åŒ…ã€ç¼–è¯‘åŒ…ï¼š<code>yum install -y make gcc-c++ cmake bison-devel ncurses-devel autoconf</code></li> <li>è¿›å…¥è§£å‹ç›®å½•ï¼š<code>cd /usr/local/mysql-5.6.35/</code></li> <li>ç”Ÿæˆå®‰è£…ç›®å½•ï¼š<code>mkdir -p /usr/local/mysql/data</code></li> <li>ç”Ÿæˆé…ç½®ï¼ˆä½¿ç”¨ InnoDBï¼‰ï¼š<code>cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/data -DMYSQL_UNIX_ADDR=/tmp/mysql.sock -DDEFAULT_CHARSET=utf8mb4 -DDEFAULT_COLLATION=utf8mb4_unicode_ci -DWITH_EXTRA_CHARSETS:STRING=utf8mb4 -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DENABLED_LOCAL_INFILE=1</code> <ul><li>æ›´å¤šå‚æ•°è¯´æ˜å¯ä»¥æŸ¥çœ‹ï¼š<a href="http://dev.mysql.com/doc/refman/5.6/en/source-configuration-options.html" target="_blank" rel="noopener noreferrer">http://dev.mysql.com/doc/refman/5.6/en/source-configuration-options.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>ç¼–è¯‘ï¼š<code>make</code>ï¼Œè¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒæ¼«é•¿ï¼Œä¸€èˆ¬éƒ½åœ¨ 30 åˆ†é’Ÿå·¦å³ï¼Œå…·ä½“è¿˜å¾—çœ‹æœºå­é…ç½®ï¼Œå¦‚æœæœ€åç»“æœæœ‰ errorï¼Œå»ºè®®åˆ é™¤æ•´ä¸ª mysql ç›®å½•åé‡æ–°è§£å‹ä¸€ä¸ªå‡ºæ¥ç»§ç»­å¤„ç†</li> <li>å®‰è£…ï¼š<code>make install</code></li> <li>é…ç½®å¼€æœºå¯åŠ¨ï¼š
<ul><li><code>cp /usr/local/mysql-5.6.35/support-files/mysql.server /etc/init.d/mysql</code></li> <li><code>chmod 755 /etc/init.d/mysql</code></li> <li><code>chkconfig mysql on</code></li></ul></li> <li>å¤åˆ¶ä¸€ä»½é…ç½®æ–‡ä»¶ï¼š <code>cp /usr/local/mysql-5.6.35/support-files/my-default.cnf /etc/my.cnf</code></li> <li>åˆ é™¤å®‰è£…çš„ç›®å½•ï¼š<code>rm -rf /usr/local/mysql-5.6.35/</code></li> <li>æ·»åŠ ç»„å’Œç”¨æˆ·åŠå®‰è£…ç›®å½•æƒé™
<ul><li><code>groupadd mysql</code> #æ·»åŠ ç»„</li> <li><code>useradd -g mysql mysql -s /bin/false</code> #åˆ›å»ºç”¨æˆ·mysqlå¹¶åŠ å…¥åˆ°mysqlç»„ï¼Œä¸å…è®¸mysqlç”¨æˆ·ç›´æ¥ç™»å½•ç³»ç»Ÿ</li> <li><code>chown -R mysql:mysql /usr/local/mysql/data</code> #è®¾ç½®MySQLæ•°æ®åº“ç›®å½•æƒé™</li></ul></li> <li>åˆå§‹åŒ–æ•°æ®åº“ï¼š<code>/usr/local/mysql/scripts/mysql_install_db --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --skip-name-resolve --user=mysql</code></li> <li>å¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼š
<ul><li><code>iptables -I INPUT -p tcp -m tcp --dport 3306 -j ACCEPT</code></li> <li><code>service iptables save</code></li> <li><code>service iptables restart</code></li></ul></li> <li>ç¦ç”¨ selinux
<ul><li>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/selinux/config</code></li> <li>æŠŠ <code>SELINUX=enforcing</code> æ”¹ä¸º <code>SELINUX=disabled</code></li></ul></li> <li>å¸¸ç”¨å‘½ä»¤è½¯è¿æ¥ï¼Œæ‰å¯ä»¥åœ¨ç»ˆç«¯ç›´æ¥ä½¿ç”¨ï¼šmysql å’Œ mysqladmin å‘½ä»¤
<ul><li><code>ln -s /usr/local/mysql/bin/mysql /usr/bin</code></li> <li><code>ln -s /usr/local/mysql/bin/mysqladmin /usr/bin</code></li> <li><code>ln -s /usr/local/mysql/bin/mysqldump /usr/bin</code></li> <li><code>ln -s /usr/local/mysql/bin/mysqlslap /usr/bin</code></li></ul></li></ul></li></ul></li></ul> <h2 id="mysql-5-7-yum-å®‰è£…"><a href="#mysql-5-7-yum-å®‰è£…" class="header-anchor">#</a> MySQL 5.7 YUM å®‰è£…</h2> <ul><li>å®˜ç½‘ï¼š<a href="https://dev.mysql.com/doc/refman/5.7/en/linux-installation-yum-repo.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/5.7/en/linux-installation-yum-repo.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language- extra-class"><pre class="language-text"><code>
ç¦ç”¨ selinuxï¼šsetenforce 0

wget https://repo.mysql.com//mysql57-community-release-el7-11.noarch.rpm
yum localinstall mysql57-community-release-el7-11.noarch.rpm
yum install mysql-community-server
ä¸€å…± 194M

é…ç½®æ–‡ä»¶ï¼š/etc/my.cnf
systemctl start mysqld
systemctl status mysqld

æŸ¥çœ‹åˆæ¬¡ä½¿ç”¨çš„ä¸´æ—¶å¯†ç ï¼šgrep 'temporary password' /var/log/mysqld.log

</code></pre></div><hr> <h2 id="mysql-é…ç½®"><a href="#mysql-é…ç½®" class="header-anchor">#</a> MySQL é…ç½®</h2> <ul><li>å®˜ç½‘é…ç½®å‚æ•°è§£é‡Šï¼š<a href="http://dev.mysql.com/doc/refman/5.6/en/mysqld-option-tables.html" target="_blank" rel="noopener noreferrer">http://dev.mysql.com/doc/refman/5.6/en/mysqld-option-tables.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>æ‰¾ä¸€ä¸‹å½“å‰ç³»ç»Ÿä¸­æœ‰å¤šå°‘ä¸ª my.cnf æ–‡ä»¶ï¼š<code>find / -name &quot;my.cnf&quot;</code>ï¼Œæˆ‘æŸ¥åˆ°çš„ç»“æœï¼š</li></ul> <div class="language-nginx extra-class"><pre class="language-nginx"><code>/etc/my.cnf
/usr/local/mysql/my.cnf
/usr/local/mysql/mysql-test/suite/ndb/my.cnf
/usr/local/mysql/mysql-test/suite/ndb_big/my.cnf
.............
/usr/local/mysql/mysql-test/suite/ndb_rpl/my.cnf
</code></pre></div><ul><li>ä¿ç•™ <strong>/etc/my.cnf</strong> å’Œ <strong>/usr/local/mysql/mysql-test/</strong> ç›®å½•ä¸‹é…ç½®æ–‡ä»¶ï¼Œå…¶ä»–åˆ é™¤æ‰ã€‚</li> <li>æˆ‘æ•´ç†çš„ä¸€ä¸ªå•æœºç‰ˆé…ç½®è¯´æ˜ï¼ˆMySQL 5.6ï¼Œé€‚ç”¨äº 1G å†…å­˜çš„æœåŠ¡å™¨ï¼‰ï¼š
<ul><li><a href="MySQL-Settings/MySQL-5.6/1G-Memory-Machine/my-for-comprehensive.cnf">my.cnf</a></li></ul></li> <li>å…¶ä¸­æˆ‘æµ‹è¯•çš„ç»“æœï¼Œåœ¨ä¸é€‚ç”¨ä»»ä½•é…ç½®ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œ1G å†…å­˜å®‰è£… MySQL 5.6 é»˜è®¤å°±ä¼šå ç”¨ 400M å·¦å³çš„å†…å­˜ï¼Œè¦é™ä¸‹æ¥çš„æ ¸å¿ƒé…ç½®è¦è¡¥ä¸Šè¿™å‡ ä¸ªå‚æ•°ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>performance_schema_max_table_instances=400
table_definition_cache=400
table_open_cache=256
</code></pre></div><h2 id="ä¿®æ”¹-root-è´¦å·å¯†ç "><a href="#ä¿®æ”¹-root-è´¦å·å¯†ç " class="header-anchor">#</a> ä¿®æ”¹ root è´¦å·å¯†ç </h2> <ul><li>å¯åŠ¨ Mysql æœåŠ¡å™¨ï¼ˆCentOS 6ï¼‰ï¼š<code>service mysql start</code></li> <li>å¯åŠ¨ Mysql æœåŠ¡å™¨ï¼ˆCentOS 7ï¼‰ï¼š<code>systemctl start mysql</code></li> <li>æŸ¥çœ‹æ˜¯å¦å·²ç»å¯åŠ¨äº†ï¼š<code>ps aux | grep mysql</code></li> <li>é»˜è®¤å®‰è£…æƒ…å†µä¸‹ï¼Œroot çš„å¯†ç æ˜¯ç©ºï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªå¯†ç ï¼Œå‡è®¾æˆ‘è®¾ç½®ä¸ºï¼š123456</li> <li>ç»ˆç«¯ä¸‹æ‰§è¡Œï¼š<code>mysql -uroot</code> <ul><li>ç°åœ¨è¿›å…¥äº† mysql å‘½ä»¤è¡Œç®¡ç†ç•Œé¢ï¼Œè¾“å…¥ï¼š<code>SET PASSWORD = PASSWORD('123456');FLUSH PRIVILEGES;</code></li> <li>ç°åœ¨è¿›å…¥äº† mysql å‘½ä»¤è¡Œç®¡ç†ç•Œé¢ï¼Œè¾“å…¥ï¼š<code>UPDATE user SET authentication_string=PASSWORD('123456') where USER='root';FLUSH PRIVILEGES;</code></li></ul></li> <li>ä¿®æ”¹å¯†ç åï¼Œç»ˆç«¯ä¸‹æ‰§è¡Œï¼š<code>mysql -uroot -p</code> <ul><li>æ ¹æ®æç¤ºï¼Œè¾“å…¥å¯†ç è¿›åº¦ mysql å‘½ä»¤è¡ŒçŠ¶æ€ã€‚</li></ul></li> <li>å¦‚æœä½ åœ¨å…¶ä»–æœºå­ä¸Šè¿æ¥è¯¥æ•°æ®åº“æœºå­æŠ¥ï¼š<strong>Access denied for user 'root'@'localhost' (using password: YES)</strong> <ul><li>è§£å†³åŠæ³•ï¼š</li> <li>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼ˆCentOS 6ï¼‰ï¼š<code>service mysql stop</code></li> <li>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼ˆCentOS 7ï¼‰ï¼š<code>systemctl stop mysql</code></li> <li>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼ˆå‰é¢æ·»åŠ çš„ Linux ç”¨æˆ· mysql å¿…é¡»æœ‰å­˜åœ¨ï¼‰ï¼š<code>/usr/local/mysql/bin/mysqld --skip-grant-tables --user=mysql</code> <ul><li>æ­¤æ—¶ MySQL æœåŠ¡ä¼šä¸€ç›´å¤„äºç›‘å¬çŠ¶æ€ï¼Œä½ éœ€è¦å¦èµ·ä¸€ä¸ªç»ˆç«¯çª—å£æ¥æ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ</li> <li>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼š<code>mysql -u root mysql</code> æˆ–è€…ï¼š<code>mysql -h 127.0.0.1 -u root -P 3306 -p</code></li> <li>æŠŠå¯†ç æ”¹ä¸ºï¼š123456ï¼Œè¿›å…¥ MySQL å‘½ä»¤åæ‰§è¡Œï¼š<code>UPDATE user SET Password=PASSWORD('123456') where USER='root';FLUSH PRIVILEGES;</code></li> <li>ç„¶åé‡å¯ MySQL æœåŠ¡ï¼ˆCentOS 6ï¼‰ï¼š<code>service mysql restart</code></li> <li>ç„¶åé‡å¯ MySQL æœåŠ¡ï¼ˆCentOS 7ï¼‰ï¼š<code>systemctl restart mysql</code></li></ul></li></ul></li></ul> <h2 id="è¿æ¥æŠ¥é”™-host-192-168-1-133-is-not-allowed-to-connect-to-this-mysql-server"><a href="#è¿æ¥æŠ¥é”™-host-192-168-1-133-is-not-allowed-to-connect-to-this-mysql-server" class="header-anchor">#</a> è¿æ¥æŠ¥é”™ï¼š&quot;Host '192.168.1.133' is not allowed to connect to this MySQL server&quot;</h2> <ul><li>ä¸å…è®¸é™¤äº† localhost ä¹‹å¤–å»è¿æ¥ï¼Œè§£å†³åŠæ³•ï¼Œè¿›å…¥ MySQL å‘½ä»¤è¡Œï¼Œè¾“å…¥ä¸‹é¢å†…å®¹ï¼š</li> <li>å¼€å‘æœºè®¾ç½®å…è®¸ä»»ä½•æœºå­è®¿é—®ï¼š
<ul><li><code>vim /etc/my.cnf</code> ä¸­ä¸èƒ½æœ‰ï¼š<code>bind-address = 127.0.0.1</code></li> <li>é…ç½®ï¼š<code>GRANT ALL PRIVILEGES ON *.* TO 'æ•°æ®åº“ç”¨æˆ·å'@'%' IDENTIFIED BY 'æ•°æ®åº“ç”¨æˆ·åçš„å¯†ç ' WITH GRANT OPTION;</code></li> <li>æ›´æ–°é…ç½®ï¼š<code>flush privileges;</code></li></ul></li> <li>ç”Ÿäº§æœºè®¾ç½®åªè¿è¡Œæœ¬æœºè®¿é—®ï¼š
<ul><li><code>vim /etc/my.cnf</code> ä¸­å¿…é¡»æœ‰ï¼š<code>bind-address = 127.0.0.1</code></li> <li>é…ç½®ï¼š<code>GRANT ALL PRIVILEGES ON *.* TO 'æ•°æ®åº“ç”¨æˆ·å'@'127.0.0.1' IDENTIFIED BY 'æ•°æ®åº“ç”¨æˆ·åçš„å¯†ç ' WITH GRANT OPTION;</code></li> <li>æ›´æ–°é…ç½®ï¼š<code>flush privileges;</code></li></ul></li></ul> <h2 id="ä¿®æ”¹å¯†ç æŠ¥é”™-your-password-does-not-satisfy-the-current-policy-requirements"><a href="#ä¿®æ”¹å¯†ç æŠ¥é”™-your-password-does-not-satisfy-the-current-policy-requirements" class="header-anchor">#</a> ä¿®æ”¹å¯†ç æŠ¥é”™ï¼šYour password does not satisfy the current policy requirements</h2> <ul><li>MySQL 5.7 å®‰å…¨æ€§è¦æ±‚æ›´é«˜ï¼Œéœ€è¦è¿™ä¹ˆåšï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>set global validate_password_policy=0; #å¯†ç å¼ºåº¦è®¾ä¸ºæœ€ä½ç­‰çº§
set global validate_password_length=6; #å¯†ç å…è®¸æœ€å°é•¿åº¦ä¸º6
set password = password('æ–°å¯†ç ');
FLUSH PRIVILEGES;
</code></pre></div><h2 id="mysql-5-7"><a href="#mysql-5-7" class="header-anchor">#</a> MySQL 5.7</h2> <ul><li>æŠ¥é”™å†…å®¹ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>Expression #1 of ORDER BY clause is not in GROUP BY clause and contains nonaggregated column 'youmeek.nm.id' 
which is not functionally dependent on columns in GROUP BY clause; 
this is incompatible with sql_mode=only_full_group_by
</code></pre></div><ul><li>æŸ¥ä¸‹è‡ªå·±çš„æ¨¡å¼ï¼š<code>select version(), @@sql_mode;</code></li> <li>è§£å†³åŠæ³•ï¼Œä¿®æ”¹ my.cnfï¼Œå¢åŠ è¿™ä¸€è¡Œï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION;
</code></pre></div><h2 id="å°å†…å­˜æœºå­-mysql-é¢‘ç¹æŒ‚æ‰è§£å†³åŠæ³•-1g-centos-7-4"><a href="#å°å†…å­˜æœºå­-mysql-é¢‘ç¹æŒ‚æ‰è§£å†³åŠæ³•-1g-centos-7-4" class="header-anchor">#</a> å°å†…å­˜æœºå­ï¼ŒMySQL é¢‘ç¹æŒ‚æ‰è§£å†³åŠæ³•ï¼ˆ1G + CentOS 7.4ï¼‰</h2> <ul><li>ä¿å­˜ç³»ç»Ÿæ—¥å¿—åˆ°æœ¬åœ°è¿›è¡ŒæŸ¥çœ‹ï¼š<code>cd /var/log/ &amp;&amp; sz messages</code></li> <li>å…¶ä¸­å¯ä»¥çœ‹åˆ°è¿™æ ·çš„å‡ å¥è¯ï¼ˆå¯ä»¥çŸ¥é“å†…å­˜ä¸å¤Ÿäº†ï¼‰ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>Jul  6 21:49:14 VM_123_201_centos kernel: Out of memory: Kill process 19452 (httpd) score 36 or sacrifice child
Jul  6 21:49:14 VM_123_201_centos kernel: Killed process 19452 (httpd) total-vm:516404kB, anon-rss:36088kB, file-rss:168kB, shmem-rss:12kB
</code></pre></div><ul><li>å¯¹äº 1G çš„å†…å­˜ MySQLï¼ˆ5.6.35ï¼‰ï¼Œå»ºè®®é‡ç‚¹ä¸‹é¢é…ç½®ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>[mysqld]
table_definition_cache=400
table_open_cache=256
innodb_buffer_pool_size = 64M
max_connections = 100 
</code></pre></div><ul><li>å¢åŠ  swapï¼ˆäº‘æœåŠ¡åŸºæœ¬éƒ½æ˜¯æ²¡ swap çš„ï¼‰</li> <li>åˆ†åˆ«æ‰§è¡Œä¸‹é¢ shell å‘½ä»¤ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>dd if=/dev/zero of=/swapfile bs=1M count=1024
mkswap /swapfile
swapon /swapfile
</code></pre></div><ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/fstab</code> <ul><li>æ·»åŠ è¿™å¥åœ¨æ–‡ä»¶æœ€åä¸€è¡Œï¼š<code>/swapfile swap swap defauluts 0 0</code></li></ul></li> <li>é‡å¯æœºå­ï¼š<code>reboot</code></li></ul> <h2 id="mysql-ä¸»ä»å¤åˆ¶"><a href="#mysql-ä¸»ä»å¤åˆ¶" class="header-anchor">#</a> MySQL ä¸»ä»å¤åˆ¶</h2> <h3 id="ç¯å¢ƒè¯´æ˜å’Œæ³¨æ„ç‚¹"><a href="#ç¯å¢ƒè¯´æ˜å’Œæ³¨æ„ç‚¹" class="header-anchor">#</a> ç¯å¢ƒè¯´æ˜å’Œæ³¨æ„ç‚¹</h3> <ul><li>å‡è®¾æœ‰ä¸¤å°æœåŠ¡å™¨ï¼Œä¸€å°åšä¸»ï¼Œä¸€å°åšä»
<ul><li>MySQL ä¸»ä¿¡æ¯ï¼š
<ul><li>IPï¼š<strong>12.168.1.113</strong></li> <li>ç«¯å£ï¼š<strong>3306</strong></li></ul></li> <li>MySQL ä»ä¿¡æ¯ï¼š
<ul><li>IPï¼š<strong>12.168.1.115</strong></li> <li>ç«¯å£ï¼š<strong>3306</strong></li></ul></li></ul></li> <li>æ³¨æ„ç‚¹
<ul><li>ä¸» DB server å’Œä» DB server æ•°æ®åº“çš„ç‰ˆæœ¬ä¸€è‡´</li> <li>ä¸» DB server å’Œä» DB server æ•°æ®åº“æ•°æ®ä¸€è‡´</li> <li>ä¸» DB server å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—ï¼Œä¸» DB server å’Œä» DB server çš„ server-id éƒ½å¿…é¡»å”¯ä¸€</li></ul></li> <li>ä¼˜å…ˆæ“ä½œï¼š
<ul><li><strong>æŠŠä¸»åº“çš„æ•°æ®åº“å¤åˆ¶åˆ°ä»åº“å¹¶å¯¼å…¥</strong></li></ul></li></ul> <h3 id="ä¸»åº“æœºå­æ“ä½œ"><a href="#ä¸»åº“æœºå­æ“ä½œ" class="header-anchor">#</a> ä¸»åº“æœºå­æ“ä½œ</h3> <ul><li><p>ä¸»åº“æ“ä½œæ­¥éª¤</p> <ul><li>åˆ›å»ºä¸€ä¸ªç›®å½•ï¼š<code>mkdir -p /usr/local/mysql/data/mysql-bin</code></li> <li>ä¸» DB å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½ï¼š<code>vim /etc/my.cnf</code>ï¼Œ
<ul><li>æ·»åŠ ä¸€è¡Œï¼š<code>log-bin = /usr/local/mysql/data/mysql-bin</code></li> <li>æŒ‡å®šåŒæ­¥çš„æ•°æ®åº“ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™åŒæ­¥å…¨éƒ¨æ•°æ®åº“ï¼Œå…¶ä¸­ ssm æ˜¯æˆ‘çš„æ•°æ®åº“åï¼š<code>binlog-do-db=ssm</code></li></ul></li> <li>ä¸»åº“å…³æ‰æ…¢æŸ¥è¯¢è®°å½•ï¼Œç”¨ SQL è¯­å¥æŸ¥çœ‹å½“å‰æ˜¯å¦å¼€å¯ï¼š<code>SHOW VARIABLES LIKE '%slow_query_log%';</code>ï¼Œå¦‚æœæ˜¾ç¤º OFF åˆ™è¡¨ç¤ºå…³é—­ï¼ŒON è¡¨ç¤ºå¼€å¯</li> <li>é‡å¯ä¸»åº“ MySQL æœåŠ¡</li> <li>è¿›å…¥ MySQL å‘½ä»¤è¡ŒçŠ¶æ€ï¼Œæ‰§è¡Œ SQL è¯­å¥æŸ¥è¯¢çŠ¶æ€ï¼š<code>SHOW MASTER STATUS;</code> <ul><li>åœ¨æ˜¾ç¤ºçš„ç»“æœä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®°å½•ä¸‹ <strong>File</strong> å’Œ <strong>Position</strong> å€¼ï¼Œç­‰ä¸‹ä»åº“é…ç½®æœ‰ç”¨ã€‚</li></ul></li> <li>è®¾ç½®æˆæƒç”¨æˆ· slave01 ä½¿ç”¨ 123456 å¯†ç ç™»å½•ä¸»åº“ï¼Œè¿™é‡Œ @ åçš„ IP ä¸ºä»åº“æœºå­çš„ IP åœ°å€ï¼Œå¦‚æœä»åº“çš„æœºå­æœ‰å¤šä¸ªï¼Œæˆ‘ä»¬éœ€è¦å¤šä¸ªè¿™ä¸ª SQL è¯­å¥ã€‚</li></ul> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">replication</span> slave <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'slave01'</span><span class="token variable">@'192.168.1.135'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="ä»åº“æœºå­æ“ä½œ"><a href="#ä»åº“æœºå­æ“ä½œ" class="header-anchor">#</a> ä»åº“æœºå­æ“ä½œ</h3> <ul><li><p>ä»åº“æ“ä½œæ­¥éª¤</p> <ul><li>ä»åº“å¼€å¯æ…¢æŸ¥è¯¢è®°å½•ï¼Œç”¨ SQL è¯­å¥æŸ¥çœ‹å½“å‰æ˜¯å¦å¼€å¯ï¼š<code>SHOW VARIABLES LIKE '%slow_query_log%';</code>ï¼Œå¦‚æœæ˜¾ç¤º OFF åˆ™è¡¨ç¤ºå…³é—­ï¼ŒON è¡¨ç¤ºå¼€å¯ã€‚</li> <li>æµ‹è¯•ä»åº“æœºå­æ˜¯å¦èƒ½è¿ä¸Šä¸»åº“æœºå­ï¼š<code>mysql -h 192.168.1.105 -u slave01 -p</code>ï¼Œå¿…é¡»è¦è¿ä¸Šä¸‹é¢çš„æ“ä½œæ‰æœ‰æ„ä¹‰ã€‚
<ul><li>ç”±äºä¸èƒ½æ’é™¤æ˜¯ä¸æ˜¯ç³»ç»Ÿé˜²ç«å¢™çš„é—®é¢˜ï¼Œæ‰€ä»¥å»ºè®®è¿ä¸ä¸Šä¸´æ—¶å…³æ‰é˜²ç«å¢™ï¼š<code>service iptables stop</code></li> <li>æˆ–æ˜¯æ·»åŠ é˜²ç«å¢™è§„åˆ™ï¼š
<ul><li>æ·»åŠ è§„åˆ™ï¼š<code>iptables -I INPUT -p tcp -m tcp --dport 3306 -j ACCEPT</code></li> <li>ä¿å­˜è§„åˆ™ï¼š<code>service iptables save</code></li> <li>é‡å¯ iptablesï¼š<code>service iptables restart</code></li></ul></li></ul></li> <li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/my.cnf</code>ï¼ŒæŠŠ server-id æ”¹ä¸ºè·Ÿä¸»åº“ä¸ä¸€æ ·</li> <li>åœ¨è¿›å…¥ MySQL çš„å‘½ä»¤è¡ŒçŠ¶æ€ä¸‹ï¼Œè¾“å…¥ä¸‹é¢ SQLï¼š</li></ul> <div class="language-SQL extra-class"><pre class="language-sql"><code>CHANGE MASTER <span class="token keyword">TO</span>
master_host<span class="token operator">=</span><span class="token string">'192.168.1.113'</span><span class="token punctuation">,</span>
master_user<span class="token operator">=</span><span class="token string">'slave01'</span><span class="token punctuation">,</span>
master_password<span class="token operator">=</span><span class="token string">'123456'</span><span class="token punctuation">,</span>
master_port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>
master_log_file<span class="token operator">=</span><span class="token string">'mysql3306-bin.000006'</span><span class="token punctuation">,</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>è¿™ä¸ªå€¼å¤åˆ¶åˆšåˆšè®©ä½ è®°å½•çš„å€¼
master_log_pos<span class="token operator">=</span><span class="token number">1120</span><span class="token punctuation">;</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>è¿™ä¸ªå€¼å¤åˆ¶åˆšåˆšè®©ä½ è®°å½•çš„å€¼
</code></pre></div></li> <li><p>æ‰§è¡Œè¯¥ SQL è¯­å¥ï¼Œå¯åŠ¨ slave åŒæ­¥ï¼š<code>START SLAVE;</code></p></li> <li><p>æ‰§è¡Œè¯¥ SQL è¯­å¥ï¼ŒæŸ¥çœ‹ä»åº“æœºå­åŒæ­¥çŠ¶æ€ï¼š<code>SHOW SLAVE STATUS;</code></p></li> <li><p>åœ¨æŸ¥çœ‹ç»“æœä¸­å¿…é¡»ä¸‹é¢ä¸¤ä¸ªå€¼éƒ½æ˜¯ Yes æ‰è¡¨ç¤ºé…ç½®æˆåŠŸï¼š</p> <ul><li><code>Slave_IO_Running:Yes</code> <ul><li>å¦‚æœä¸æ˜¯ Yes ä¹Ÿä¸æ˜¯ Noï¼Œè€Œæ˜¯ Connectingï¼Œé‚£å°±è¡¨ç¤ºä»æœºè¿ä¸ä¸Šä¸»åº“ï¼Œéœ€è¦ä½ è¿›ä¸€æ­¥æ’æŸ¥è¿æ¥é—®é¢˜ã€‚</li></ul></li> <li><code>Slave_SQL_Running:Yes</code></li></ul></li> <li><p>å¦‚æœä½ çš„ Slave_IO_Running æ˜¯ Noï¼Œä¸€èˆ¬å¦‚æœä½ æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šæµ‹è¯•çš„è¯ï¼Œä»åº“çš„è™šæ‹Ÿæœºæ˜¯ä»ä¸»åº“çš„è™šæ‹Ÿæœºä¸Šå¤åˆ¶è¿‡æ¥çš„ï¼Œé‚£ä¸€èˆ¬éƒ½ä¼šè¿™æ ·çš„ï¼Œå› ä¸ºä¸¤å°çš„ MySQL çš„ UUID å€¼ä¸€æ ·ã€‚ä½ å¯ä»¥æ£€æŸ¥ä»åº“ä¸‹çš„é”™è¯¯æ—¥å¿—ï¼š<code>cat /usr/local/mysql/data/mysql-error.log</code></p> <ul><li>å¦‚æœé‡Œé¢æç¤º uuid é”™è¯¯ï¼Œä½ å¯ä»¥ç¼–è¾‘ä»åº“çš„è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼š<code>vim /usr/local/mysql/data/auto.cnf</code>ï¼ŒæŠŠé…ç½®æ–‡ä»¶ä¸­çš„ï¼šserver-uuid å€¼éšä¾¿æ”¹ä¸€ä¸‹ï¼Œä¿è¯å’Œä¸»åº“æ˜¯ä¸ä¸€æ ·å³å¯ã€‚</li></ul></li></ul> <h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="header-anchor">#</a> èµ„æ–™</h2> <ul><li><a href="http://www.cnblogs.com/xiongpq/p/3384681.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/xiongpq/p/3384681.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/adminlove520/Linux_All_in_one/edit/main/docs/linux/soft/Databases/Mysql-Install-And-Settings.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">3 hours ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/Linux_All_in_one/assets/js/app.4a61619a.js" defer></script><script src="/Linux_All_in_one/assets/js/2.ee3c5eb7.js" defer></script><script src="/Linux_All_in_one/assets/js/1.bc260717.js" defer></script><script src="/Linux_All_in_one/assets/js/79.48030292.js" defer></script><script src="/Linux_All_in_one/assets/js/21.f8578145.js" defer></script>
  </body>
</html>
