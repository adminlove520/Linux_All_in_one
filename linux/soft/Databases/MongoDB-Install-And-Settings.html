<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB 安装和配置 | Linux_All_in_one</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/Linux_All_in_one/favicon.ico">
    <meta name="description" content="Linux 运维、软件运维、Docker 教程、网络安全">
    
    <link rel="preload" href="/Linux_All_in_one/assets/css/0.styles.407428ab.css" as="style"><link rel="preload" href="/Linux_All_in_one/assets/js/app.4a61619a.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/2.ee3c5eb7.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/1.bc260717.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/78.4bb79720.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/21.f8578145.js" as="script"><link rel="prefetch" href="/Linux_All_in_one/assets/js/100.5e0212b4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/101.280ba6c4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/102.fcbe69ef.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/103.59b3bf86.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/104.628bb6be.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/105.f6a0a62b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/106.53648c35.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/107.093c4fab.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/108.f8895b2f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/109.878b5e6d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/110.e7dbd5ce.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/12.4bdd7f50.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/13.4850c8c8.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/14.66e24ed5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/15.41d57e79.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/16.96600c16.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/17.1cd68a21.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/18.f54ebd77.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/19.36d25975.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/20.0120ca8c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/22.9efa850b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/23.d7f5441c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/24.1cabd94c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/25.2cb5712a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/26.440ab754.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/27.94e60af2.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/28.f1611369.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/29.730dead3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/3.accc0318.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/30.f69c3378.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/31.be2478fc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/32.9465ce70.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/33.f4c85e8a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/34.c3a0ece1.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/35.a75dd538.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/36.da0b8594.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/37.c49eb234.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/38.16f7d0e5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/39.ba6e47f0.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/4.9736648b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/40.664ddb58.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/41.4189f6ca.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/42.6472b832.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/43.c8d06688.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/44.e39a047e.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/45.39945860.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/46.ccbd9cdc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/47.9bed3a75.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/48.05ecd397.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/49.4f2f2874.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/5.9a4eb5c9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/50.d01632db.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/51.ad40e5f5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/52.bfacfa08.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/53.9398692c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/54.b34cb199.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/55.6735c148.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/56.575312d7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/57.d54f0ac7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/58.f3cc4cf5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/59.881dba8f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/6.a3475002.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/60.859faf8a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/61.4efca474.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/62.578a9742.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/63.95e6ff4f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/64.054ab297.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/65.5be33d9b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/66.2312529e.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/67.81dd084d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/68.a11966f3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/69.ffbf7d57.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/7.b4d90be9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/70.51883659.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/71.9ff55cae.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/72.d54e184f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/73.5062fbf7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/74.0721cccd.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/75.42dd3581.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/76.d590fa57.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/77.0e5953f3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/79.48030292.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/80.d036bc22.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/81.d6524746.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/82.93460687.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/83.7c6f2e4a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/84.83b1808d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/85.14c12ffc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/86.893b5c41.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/87.7d10879f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/88.ef12068f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/89.cc81e4e4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/90.130454fc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/91.838da398.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/92.22813cd9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/93.2000427b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/94.062717c8.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/95.9cc81974.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/96.0457546b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/97.71d6bbd5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/98.e6299973.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/99.b198a395.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~docsearch.00f0a528.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~flowchart.d07b8b19.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~notification.877bb3fc.js">
    <link rel="stylesheet" href="/Linux_All_in_one/assets/css/0.styles.407428ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Linux_All_in_one/" class="home-link router-link-active"><img src="/Linux_All_in_one/images/dunwu-logo-100.png" alt="Linux_All_in_one" class="logo"> <span class="site-name can-hide">Linux_All_in_one</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Linux_All_in_one/linux/cli/" class="nav-link">
  💻 Linux 命令
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/ops/" class="nav-link">
  ⚙️ Linux 运维
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/soft/" class="nav-link router-link-active">
  📦 Linux 软件运维
</a></div><div class="nav-item"><a href="/Linux_All_in_one/docker/" class="nav-link">
  🐳 Docker 教程
</a></div><div class="nav-item"><a href="/Linux_All_in_one/Cybersecurity/" class="nav-link">
  🔒 Linux与网络安全
</a></div> <a href="https://github.com/adminlove520/Linux_All_in_one" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Linux_All_in_one/linux/cli/" class="nav-link">
  💻 Linux 命令
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/ops/" class="nav-link">
  ⚙️ Linux 运维
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/soft/" class="nav-link router-link-active">
  📦 Linux 软件运维
</a></div><div class="nav-item"><a href="/Linux_All_in_one/docker/" class="nav-link">
  🐳 Docker 教程
</a></div><div class="nav-item"><a href="/Linux_All_in_one/Cybersecurity/" class="nav-link">
  🔒 Linux与网络安全
</a></div> <a href="https://github.com/adminlove520/Linux_All_in_one" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MongoDB 安装和配置</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#mongodb-安装和配置" class="sidebar-link">MongoDB 安装和配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#基础概念" class="sidebar-link">基础概念</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#如果你用-spring-data-mongodb-依赖请注意" class="sidebar-link">如果你用 Spring Data MongoDB 依赖请注意</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#如果你用-robomongo-客户端请注意" class="sidebar-link">如果你用 Robomongo 客户端请注意</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#docker-下安装-mongodb-方式一" class="sidebar-link">Docker 下安装 MongoDB（方式一）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#docker-下安装-mongodb-方式二" class="sidebar-link">Docker 下安装 MongoDB（方式二）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#mongodb-传统方式安装" class="sidebar-link">MongoDB 传统方式安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#yum-卸载" class="sidebar-link">yum 卸载</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#_3-4-2-yum-安装" class="sidebar-link">3.4.2 yum 安装</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#_3-6-yum-安装" class="sidebar-link">3.6 yum 安装：</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#_3-4-10-tar-绿色安装" class="sidebar-link">3.4.10 tar 绿色安装</a></li></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#其他常用命令" class="sidebar-link">其他常用命令：</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#添加授权用户" class="sidebar-link">添加授权用户</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#mongodb-配置" class="sidebar-link">MongoDB 配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#常用命令" class="sidebar-link">常用命令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#导入-导出-备份-还原" class="sidebar-link">导入 / 导出 / 备份 /还原</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#java-包" class="sidebar-link">Java 包</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#gui-管理工具" class="sidebar-link">GUI 管理工具</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#基准测试" class="sidebar-link">基准测试</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#随机生成测试数据" class="sidebar-link">随机生成测试数据</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Databases/MongoDB-Install-And-Settings.html#资料" class="sidebar-link">资料</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="mongodb-安装和配置"><a href="#mongodb-安装和配置" class="header-anchor">#</a> MongoDB 安装和配置</h2> <h2 id="基础概念"><a href="#基础概念" class="header-anchor">#</a> 基础概念</h2> <ul><li>MongoDB 元素概念
<ul><li>databases: 数据库;</li> <li>collections:表；（collections组成了databases）</li> <li>documents:行；（documents组成了collections）</li></ul></li> <li>MongoDB 没有新建数据库的命令，只要进行 insert 或其它操作，MongoDB 就会自动帮你建立数据库和 collection。当查询一个不存在的 collection 时也不会出错，MongoDB 会认为那是一个空的 collection。</li> <li>一个对象被插入到数据库中时，如果它没有 ID，会自动生成一个 &quot;_id&quot; 字段，为 12 字节(24位)16进制数。</li> <li>当然如果插入文档不带 _id，则系统会帮你自动创建一个，如果自己指定了就用自己指定的。</li></ul> <h2 id="如果你用-spring-data-mongodb-依赖请注意"><a href="#如果你用-spring-data-mongodb-依赖请注意" class="header-anchor">#</a> 如果你用 Spring Data MongoDB 依赖请注意</h2> <ul><li>请先看官网最新支持到哪个版本的依赖：<a href="https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#new-features" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#new-features<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>查看锚点为：<code>What’s new in Spring Data MongoDB</code> 的内容，比如：What’s new in Spring Data MongoDB 1.10，出现这样一句话：<code>Compatible with MongoDB Server 3.4 and the MongoDB Java Driver 3.4</code></li></ul></li> <li>目前 201712 支持 MongoDB 3.4</li></ul> <h2 id="如果你用-robomongo-客户端请注意"><a href="#如果你用-robomongo-客户端请注意" class="header-anchor">#</a> 如果你用 Robomongo 客户端请注意</h2> <ul><li>请查看介绍中支持哪个版本：<a href="https://robomongo.org/download" target="_blank" rel="noopener noreferrer">https://robomongo.org/download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>目前 201712 支持 MongoDB 3.4</li></ul> <hr> <h2 id="docker-下安装-mongodb-方式一"><a href="#docker-下安装-mongodb-方式一" class="header-anchor">#</a> Docker 下安装 MongoDB（方式一）</h2> <ul><li>先创建一个宿主机以后用来存放数据的目录：<code>mkdir -p /data/docker/mongo/db</code></li> <li>赋权：<code>chmod 777 -R /data/docker/mongo/db</code></li> <li>首次运行镜像：<code>docker run --name cloud-mongo -p 27017:27017 -v /data/docker/mongo/db:/data/db -d mongo:3.4</code></li> <li>进入容器中 mongo shell 交互界面：<code>docker exec -it cloud-mongo mongo adg_mongo_db</code></li> <li>创建一个用户：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>db.createUser(
    {
        user: &quot;adguser&quot;,
        pwd: &quot;adg123456&quot;,
        roles: [ 
            { role: &quot;dbAdmin&quot;, db: &quot;adg_mongo_db&quot; },
            { role: &quot;readWrite&quot;, db: &quot;adg_mongo_db&quot; }
        ]
    }
)
</code></pre></div><ul><li>然后停掉容器：<code>docker stop cloud-mongo</code></li> <li>然后删除容器：<code>docker rm cloud-mongo</code></li> <li>重新运行镜像，这次增加需要授权才能访问的配置：<code>docker run -d -p 27017:27017 -v /data/docker/mongo/db:/data/db --restart always --name cloud-mongo mongo:3.4 --auth</code></li> <li>重新启动服务：<code>docker restart cloud-mongo</code></li> <li>导出：<code>docker exec -it cloud-mongo mongoexport -h 127.0.0.1 -u 用户名 -p 密码 -d 库名 -c 集合名 -o /data/db/mongodb.json --type json</code></li> <li>导入：<code>docker exec -it cloud-mongo mongoimport -h 127.0.0.1 -u 用户名 -p 密码 -d 库名 -c 集合名 --file /data/db/mongodb.json --type json</code></li></ul> <h2 id="docker-下安装-mongodb-方式二"><a href="#docker-下安装-mongodb-方式二" class="header-anchor">#</a> Docker 下安装 MongoDB（方式二）</h2> <ul><li>先创建一个宿主机以后用来存放数据的目录：<code>mkdir -p /data/docker/mongo/db</code></li> <li>赋权：<code>chmod 777 -R /data/docker/mongo/db</code></li> <li>运行镜像：<code>docker run --name cloud-mongo2 -p 37017:27017 -v /data/docker/mongo/db:/data/db -d mongo:3.4 --auth</code></li> <li>进入容器中 mongo shell 交互界面：<code>docker exec -it cloud-mongo2 mongo</code></li> <li>创建一个超级用户：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>use admin

db.createUser(
    {
        user: &quot;mongo-admin&quot;,
        pwd: &quot;123456&quot;,
        roles: [ 
            { role: &quot;root&quot;, db: &quot;admin&quot; }
        ]
    }
)

db.auth(&quot;mongo-admin&quot;,&quot;123456&quot;)
</code></pre></div><ul><li>使用 db.auth() 可以对数据库中的用户进行验证，如果验证成功则返回 1，否则返回 0</li> <li>接着创建一个普通数据库和用户：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>
use my_test_db


db.createUser(
    {
        user: &quot;mytestuser&quot;,
        pwd: &quot;123456&quot;,
        roles: [ 
            { role: &quot;dbAdmin&quot;, db: &quot;my_test_db&quot; },
            { role: &quot;readWrite&quot;, db: &quot;my_test_db&quot; }
        ]
    }
)


db.auth(&quot;mytestuser&quot;,&quot;123456&quot;)
</code></pre></div><hr> <h2 id="mongodb-传统方式安装"><a href="#mongodb-传统方式安装" class="header-anchor">#</a> MongoDB 传统方式安装</h2> <ul><li>关闭 SELinux
<ul><li>编辑配置文件：<code>vim /etc/selinux/config</code></li> <li>把 <code>SELINUX=enforcing</code> 改为 <code>SELINUX=disabled</code></li></ul></li> <li>MongoDB 资料
<ul><li>官网：<a href="https://www.mongodb.com" target="_blank" rel="noopener noreferrer">https://www.mongodb.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>官网文档：<a href="https://docs.mongodb.com/manual/reference/method/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/manual/reference/method/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>此时（20170228） 最新稳定版本为：<strong>3.4.2</strong></li> <li>官网下载：<a href="https://www.mongodb.com/download-center?jmp=nav#community" target="_blank" rel="noopener noreferrer">https://www.mongodb.com/download-center?jmp=nav#community<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>官网安装方法介绍：<a href="https://docs.mongodb.com/master/tutorial/install-mongodb-on-red-hat" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/master/tutorial/install-mongodb-on-red-hat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>官网文档使用的 Package 的安装方式。还有一种安装方式是下载 tar 包的方法，如果需要 tar 包方式可以看这篇文章：
<ul><li><a href="https://itjh.net/2016/07/11/centos-install-mongodb" target="_blank" rel="noopener noreferrer">https://itjh.net/2016/07/11/centos-install-mongodb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li></ul> <h3 id="yum-卸载"><a href="#yum-卸载" class="header-anchor">#</a> yum 卸载</h3> <ul><li><code>yum remove &quot;mongodb-org-*&quot;</code></li></ul> <h3 id="_3-4-2-yum-安装"><a href="#_3-4-2-yum-安装" class="header-anchor">#</a> 3.4.2 yum 安装</h3> <ul><li>新建文件：<code>vim /etc/yum.repos.d/mongodb-org-3.4.repo</code>，文件内容如下：</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>mongodb-org-3.4<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>MongoDB Repository
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.mongodb.org/yum/redhat/<span class="token variable">$releasever</span>/mongodb-org/3.4/x86_64/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://www.mongodb.org/static/pgp/server-3.4.asc
</code></pre></div><ul><li>如果你要安装 2.6 的版本，可以使用下面这个内容：</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>mongodb-org-2.6<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>MongoDB <span class="token number">2.6</span> Repository
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre></div><ul><li>上面文件新建好之后，输入安装命令：<code>yum install -y mongodb-org</code>，一共有 5 个包，加起来有 100M 左右，国内下载速度不快，需要等等，可能还会出错，如果出错用国内源：<a href="https://mirror.tuna.tsinghua.edu.cn/help/mongodb/" target="_blank" rel="noopener noreferrer">https://mirror.tuna.tsinghua.edu.cn/help/mongodb/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>开放防火墙端口：
<ul><li><code>iptables -A INPUT -p tcp -m tcp --dport 27017 -j ACCEPT</code></li> <li><code>service iptables save</code></li> <li><code>service iptables restart</code></li></ul></li></ul> <h3 id="_3-6-yum-安装"><a href="#_3-6-yum-安装" class="header-anchor">#</a> 3.6 yum 安装：</h3> <ul><li>新建文件：<code>vim /etc/yum.repos.d/mongodb-org-3.6.repo</code>，文件内容如下：</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>mongodb-org-3.6<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>MongoDB Repository
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.mongodb.org/yum/redhat/<span class="token variable">$releasever</span>/mongodb-org/testing/x86_64/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://www.mongodb.org/static/pgp/server-3.6.asc
</code></pre></div><ul><li>上面文件新建好之后，输入安装命令：<code>yum install -y mongodb-org</code>，一共有 5 个包，加起来有 100M 左右，国内下载速度不快，需要等等，可能还会出错，如果出错用国内源：<a href="https://mirror.tuna.tsinghua.edu.cn/help/mongodb/" target="_blank" rel="noopener noreferrer">https://mirror.tuna.tsinghua.edu.cn/help/mongodb/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>开放防火墙端口：
<ul><li><code>iptables -A INPUT -p tcp -m tcp --dport 27017 -j ACCEPT</code></li> <li><code>service iptables save</code></li> <li><code>service iptables restart</code></li></ul></li></ul> <h3 id="_3-4-10-tar-绿色安装"><a href="#_3-4-10-tar-绿色安装" class="header-anchor">#</a> 3.4.10 tar 绿色安装</h3> <ul><li>下载：<code>wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.4.10.tgz</code></li> <li>解压到指定目录，并重命名：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>tar zxvf mongodb-linux-x86_64-rhel62-3.4.10.gz

mv mongodb-linux-x86_64-rhel62-3.4.10 mongodb

mv mongodb /usr/program
</code></pre></div><ul><li>增加系统变量，我这里是用 zsh</li></ul> <div class="language- extra-class"><pre class="language-text"><code>vim ~/.zshrc 

export MONGODB_HOME=/usr/program/mongodb
export PATH=$MONGODB_HOME/bin:$PATH

source ~/.zshrc
</code></pre></div><ul><li>测试是否安装成功：<code>mongod -v</code>，安装成功会得到如下信息：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] MongoDB starting : pid=31155 port=27017 dbpath=/data/db 64-bit host=youmeek
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] db version v3.4.10
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] git version: 078f28920cb24de0dd479b5ea6c66c644f6326e9
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] OpenSSL version: OpenSSL 1.0.1e-fips 11 Feb 2013
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] allocator: tcmalloc
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] modules: none
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] build environment:
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten]     distmod: rhel62
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten]     distarch: x86_64
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten]     target_arch: x86_64
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] options: { systemLog: { verbosity: 1 } }
2017-12-03T00:08:09.854+0800 D -        [initandlisten] User Assertion: 29:Data directory /data/db not found. src/mongo/db/service_context_d.cpp 98
2017-12-03T00:08:09.854+0800 I STORAGE  [initandlisten] exception in initAndListen: 29 Data directory /data/db not found., terminating
2017-12-03T00:08:09.854+0800 I NETWORK  [initandlisten] shutdown: going to close listening sockets...
2017-12-03T00:08:09.854+0800 I NETWORK  [initandlisten] shutdown: going to flush diaglog...
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] now exiting
2017-12-03T00:08:09.854+0800 I CONTROL  [initandlisten] shutting down with code:100
</code></pre></div><ul><li>创建数据库、日志存放目录：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mkdir -p /usr/program/mongodb/data
mkdir -p /usr/program/mongodb/log
touch /usr/program/mongodb/log/mongodb.log
</code></pre></div><ul><li>创建配置文件：<code>vim /etc/mongodb.conf</code>，并写入内容：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>dbpath=/usr/program/mongodb/data
logpath=/usr/program/mongodb/log/mongodb.log
logappend=true
port=27017
fork=true
</code></pre></div><ul><li>看下是否已经有 mongo 在运行，如果有就 kill 掉：<code>ps -ef | grep mongo</code></li> <li>通过配置文件启动：<code>mongod -f /etc/mongodb.conf</code></li> <li>显示下面信息则表示启动了：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>about to fork child process, waiting until server is ready for connections.
forked process: 29167
child process started successfully, parent exiting
</code></pre></div><ul><li>进入 MongoDB 后台管理 Shell：<code>cd /usr/program/mongodb/bin &amp;&amp; ./mongo</code></li> <li>创建数据库：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>use youmeek
</code></pre></div><ul><li>创建用户，并授权，需要注意的是：dbAdmin 的权限是没有包含 readWrite，所以很多时候要根据需求添加多个权限：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>db.createUser(
    {
        user: &quot;youmeek&quot;,
        pwd: &quot;youmeek123456&quot;,
        roles: [ 
            { role: &quot;dbAdmin&quot;, db: &quot;youmeek&quot; },
            { role: &quot;readWrite&quot;, db: &quot;youmeek&quot; }
        ]
    }
)
</code></pre></div><ul><li>开放防火墙端口：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>iptables -A INPUT -p tcp -m tcp --dport 27017 -j ACCEPT
service iptables save
service iptables restart
</code></pre></div><ul><li>修改配置文件：<code>vim /etc/mongodb.conf</code>，在文件最后面增加一行：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>auth=true
</code></pre></div><ul><li>表示开启用户认证，这样后面要连接 mongo 就必须输入数据库、用户名、密码。</li> <li>然后重启 mongo，开始使用。</li></ul> <h2 id="其他常用命令"><a href="#其他常用命令" class="header-anchor">#</a> 其他常用命令：</h2> <ul><li>检查版本：<code>mongod --version</code></li> <li>启动：<code>service mongod start</code></li> <li>停止：<code>service mongod stop</code></li> <li>重启：<code>service mongod restart</code></li> <li>添加自启动：<code>chkconfig mongod on</code></li> <li>进入客户端：<code>mongo</code>，如果有授权用户格式为：<code>mongo 127.0.0.1:27017/admin -u 用户名 -p 用户密码</code></li> <li>卸载命令：<code>yum erase $(rpm -qa | grep mongodb-org)</code> <ul><li>删除数据库：<code>rm -r /var/lib/mongo</code></li> <li>删除 log：<code>rm -r /var/log/mongodb</code></li></ul></li></ul> <h2 id="添加授权用户"><a href="#添加授权用户" class="header-anchor">#</a> 添加授权用户</h2> <ul><li>先进入 mongo 客户端 ：<code>mongo</code></li> <li>输入：<code>use admin</code>，然后输入：</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>db.createUser<span class="token punctuation">(</span>
   <span class="token punctuation">{</span>
     user: <span class="token string">&quot;gitnavi&quot;</span>,
     pwd: <span class="token string">&quot;123456&quot;</span>,
     roles: <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string">&quot;role&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;dbAdmin&quot;</span>, <span class="token string">&quot;db&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;youmeek_nav&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><ul><li>修改密码：<code>db.changeUserPassword(用户名, 密码)</code></li> <li>删除用户：<code>db.removeUser(用户名)</code></li> <li>内置角色：
<ul><li>read：允许用户读取指定数据库</li> <li>readWrite：允许用户读写指定数据库</li> <li>dbAdmin：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile</li> <li>userAdmin：允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户</li> <li>clusterAdmin：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。</li> <li>readAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读权限</li> <li>readWriteAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读写权限</li> <li>userAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限</li> <li>dbAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。</li> <li>root：只在admin数据库中可用。超级账号，超级权限</li></ul></li></ul> <h2 id="mongodb-配置"><a href="#mongodb-配置" class="header-anchor">#</a> MongoDB 配置</h2> <ul><li>编辑配置文件：<code>vim /etc/mongod.conf</code>，注意：编辑完记得重启 MongoDB 服务</li> <li>默认的数据库目录：<code>/var/lib/mongo</code></li> <li>默认的日志目录：<code>/var/log/mongodb</code></li> <li>默认的配置文件内容：</li></ul> <div class="language-ini extra-class"><pre class="language-ini"><code>bindIp:127.0.0.1 #注释此行，表示除了本机也可以登陆

<span class="token comment"># 补充这个，表示必须使用带用户名密码的才能请求 mongodb，比如访问 admin 数据库：mongo 192.168.1.121:27017/admin -u 用户名 -p 用户密码</span>
security:
  authorization: enabled
</code></pre></div><h2 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h2> <ul><li><code>show dbs</code>，查看已有数据库</li> <li><code>use 数据库名</code>，进入指定数据库，如果这个数据库不存在了也是可以进入的，进入之后 insert 一条语句就会自动创建了。</li> <li><code>db</code>，显示当前用的数据库</li> <li><code>show collections</code>，列出当前数据库的collections(当前数据库下的表)</li> <li><code>show tables</code>，查看数据库中的集</li> <li><code>exit</code>，退出</li> <li><code>show users</code>，查看当前库下的用户</li> <li><code>db.system.users.find().pretty()</code>，查看所有用户</li> <li><code>db.dropAllUsers()</code>，删除所有用户</li> <li><code>db.dropDatebase()</code>，删除当前这个数据库</li> <li><code>db.集名称.find()</code>，查看集中的所有数据，等同于：select * from 表名称</li> <li><code>db.集名称.findOne()</code>，查看集中的一条数据，等同于：select * from 表名称 limit 0,1</li> <li><code>db.集名称.find().limit(10)</code>，查看集中的一条数据</li> <li><code>db.集名称.find().sort({name:1})</code>，查询列表，根据字段name排序 #1正序 -1倒序</li> <li><code>db.集名称.find().sort({x:1}).skip(5).limit(10)</code>，查询列表，根据字段name排序，等同于 select from foo order by x asc limit 5, 10</li> <li><code>db.集名称.find({x:10})</code>，查询列表，等同于 select from foo where x = 10</li> <li><code>db.集名称.find({x: {$lt:10}})</code>，select from foo where x &lt;= 10</li> <li><code>db.集名称.find({}, {y:true})</code>，select y from foo</li> <li><code>db.集名称.find({&quot;address.city&quot;:&quot;gz&quot;})</code>，搜索嵌套文档address中city值为gz的记录</li> <li><code>db.集名称.find({likes:&quot;math&quot;})</code>，搜索数组</li> <li><code>db.集名称.insert({&quot;a&quot;:1,&quot;b&quot;:2})</code>，插入一个测试数据</li> <li><code>db.集名称.find({name:&quot;lichuang&quot;})</code>，根据索引或字段查找数据</li> <li><code>db.集名称.update({name:&quot;张三&quot;},{$set:{name:&quot;李四&quot;}})</code>，更新数据，等同于：UPDATE 表名 SET name='李四' WHERE name = '张三'</li> <li><code>db.集名称.update({name:&quot;张三&quot;},{$set:{name:&quot;李四&quot;},{upsert:true},{multi:true}})</code>，更新数据，等同于：UPDATE 表名 SET name='李四' WHERE name = '张三'。其中特殊的是 upsert 为 true 的时候，表示如果没有这条数据，则创建一条。multi 表示，所有满足条件的都进行更新，不然默认只找到的第一条更新。</li> <li><code>db.集名称.remove({name:&quot;lichuang&quot;})</code>，删除数据，等同于：DELETE FROM 表名 WHERE name='lichuang'</li> <li><code>db.集名称.drop()</code>，删除这个集合</li> <li><code>db.集名称.getIndexes()</code>，查看集合索引</li> <li><code>db.集名称.dropIndex(&quot;name_1&quot;)</code>，删除索引</li> <li><code>db.集名称.ensureIndex({title:1})</code>，创建索引</li> <li><code>db.集名称.ensureIndex({titile:1},{name:&quot;indexname&quot;})</code>，创建索引，第二个属性设置索引名称</li> <li><code>db.集名称.ensureIndex({titile:1},{unique:true/false})</code>，创建唯一索引，第二个属性设置为true说明该字段中值不能重复，false可以重复</li> <li><code>db.集名称.ensureIndex({name:1,age:1})</code>，复合索引</li> <li><code>db.集名称.ensureIndex({&quot;address.city&quot;:1})</code>，在嵌套文档的字段上建索引</li> <li><code>db.集名称.insert({&quot;article&quot;,&quot;text&quot;})</code>，全文索引，指定为text类型,每个数据集合中只允许创建一个全文索引</li> <li><code>db.adminCommand( {setParameter:1, textSearchEnabled:true})</code>，开启全文本索引功能</li> <li>一些符号说明：</li></ul> <div class="language-ini extra-class"><pre class="language-ini"><code>$lt -&gt;less then 小于
$lte -&gt;less than and equal 不大于
$lt -&gt;less then 小于
$gt -&gt;greater then 大于
$gte -&gt;greater then and equal 不小于）
$ne -&gt;not equal 不等于
</code></pre></div><ul><li>其他材料：
<ul><li><a href="https://segmentfault.com/a/1190000007550421" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000007550421<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000005095959" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000005095959<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://blog.csdn.net/endlu/article/details/51098518" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/endlu/article/details/51098518<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.cnblogs.com/shaosks/p/5666764.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/shaosks/p/5666764.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.cookqq.com/blog/51277786-c26c-4f94-9be2-428f3633d9e5" target="_blank" rel="noopener noreferrer">http://www.cookqq.com/blog/51277786-c26c-4f94-9be2-428f3633d9e5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.thinksaas.cn/topics/0/513/513705.html" target="_blank" rel="noopener noreferrer">http://www.thinksaas.cn/topics/0/513/513705.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.fedte.cc/p/511.html" target="_blank" rel="noopener noreferrer">https://www.fedte.cc/p/511.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h2 id="导入-导出-备份-还原"><a href="#导入-导出-备份-还原" class="header-anchor">#</a> 导入 / 导出 / 备份 /还原</h2> <ul><li>数据的导出、导入
<ul><li>导出：<code>mongoexport -h 127.0.0.1 -u 用户名 -p 密码 -d 库名 -c 集合名 -o /opt/mongodb.json --type json</code></li> <li>导入：<code>mongoimport -h 127.0.0.1 -u 用户名 -p 密码 -d 库名 -c 集合名 --file /opt/mongodb.json --type json</code></li></ul></li></ul> <h2 id="java-包"><a href="#java-包" class="header-anchor">#</a> Java 包</h2> <ul><li>spring-data-mongodb：<a href="http://projects.spring.io/spring-data-mongodb/" target="_blank" rel="noopener noreferrer">http://projects.spring.io/spring-data-mongodb/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>mongo-java-driver：<a href="https://github.com/mongodb/mongo-java-driver" target="_blank" rel="noopener noreferrer">https://github.com/mongodb/mongo-java-driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="gui-管理工具"><a href="#gui-管理工具" class="header-anchor">#</a> GUI 管理工具</h2> <ul><li>Robomongo：<a href="https://robomongo.org/" target="_blank" rel="noopener noreferrer">https://robomongo.org/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="基准测试"><a href="#基准测试" class="header-anchor">#</a> 基准测试</h2> <ul><li><a href="https://github.com/brianfrankcooper/YCSB/tree/master/mongodb#4-run-ycsb" target="_blank" rel="noopener noreferrer">https://github.com/brianfrankcooper/YCSB/tree/master/mongodb#4-run-ycsb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="随机生成测试数据"><a href="#随机生成测试数据" class="header-anchor">#</a> 随机生成测试数据</h2> <ul><li><a href="https://github.com/feliixx/mgodatagen" target="_blank" rel="noopener noreferrer">https://github.com/feliixx/mgodatagen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="资料"><a href="#资料" class="header-anchor">#</a> 资料</h2> <ul><li><a href="http://www.cnblogs.com/zhoujinyi/p/4610050.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/zhoujinyi/p/4610050.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://lvtraveler.github.io/2016/05/22/%E3%80%90MongoDB%E3%80%91MongoDB%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" target="_blank" rel="noopener noreferrer">http://lvtraveler.github.io/2016/05/22/【MongoDB】MongoDB入门（一）基本操作-常用命令/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/adminlove520/Linux_All_in_one/edit/main/docs/linux/soft/Databases/MongoDB-Install-And-Settings.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3 hours ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/Linux_All_in_one/assets/js/app.4a61619a.js" defer></script><script src="/Linux_All_in_one/assets/js/2.ee3c5eb7.js" defer></script><script src="/Linux_All_in_one/assets/js/1.bc260717.js" defer></script><script src="/Linux_All_in_one/assets/js/78.4bb79720.js" defer></script><script src="/Linux_All_in_one/assets/js/21.f8578145.js" defer></script>
  </body>
</html>
