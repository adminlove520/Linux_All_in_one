<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx å®‰è£…å’Œé…ç½® | Linux_All_in_one</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/Linux_All_in_one/favicon.ico">
    <meta name="description" content="Linux è¿ç»´ã€è½¯ä»¶è¿ç»´ã€Docker æ•™ç¨‹ã€ç½‘ç»œå®‰å…¨">
    
    <link rel="preload" href="/Linux_All_in_one/assets/css/0.styles.407428ab.css" as="style"><link rel="preload" href="/Linux_All_in_one/assets/js/app.4a61619a.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/2.ee3c5eb7.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/1.bc260717.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/28.f1611369.js" as="script"><link rel="preload" href="/Linux_All_in_one/assets/js/21.f8578145.js" as="script"><link rel="prefetch" href="/Linux_All_in_one/assets/js/100.5e0212b4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/101.280ba6c4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/102.fcbe69ef.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/103.59b3bf86.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/104.628bb6be.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/105.f6a0a62b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/106.53648c35.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/107.093c4fab.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/108.f8895b2f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/109.878b5e6d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/110.e7dbd5ce.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/12.4bdd7f50.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/13.4850c8c8.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/14.66e24ed5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/15.41d57e79.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/16.96600c16.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/17.1cd68a21.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/18.f54ebd77.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/19.36d25975.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/20.0120ca8c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/22.9efa850b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/23.d7f5441c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/24.1cabd94c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/25.2cb5712a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/26.440ab754.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/27.94e60af2.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/29.730dead3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/3.accc0318.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/30.f69c3378.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/31.be2478fc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/32.9465ce70.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/33.f4c85e8a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/34.c3a0ece1.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/35.a75dd538.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/36.da0b8594.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/37.c49eb234.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/38.16f7d0e5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/39.ba6e47f0.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/4.9736648b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/40.664ddb58.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/41.4189f6ca.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/42.6472b832.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/43.c8d06688.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/44.e39a047e.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/45.39945860.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/46.ccbd9cdc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/47.9bed3a75.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/48.05ecd397.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/49.4f2f2874.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/5.9a4eb5c9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/50.d01632db.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/51.ad40e5f5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/52.bfacfa08.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/53.9398692c.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/54.b34cb199.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/55.6735c148.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/56.575312d7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/57.d54f0ac7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/58.f3cc4cf5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/59.881dba8f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/6.a3475002.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/60.859faf8a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/61.4efca474.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/62.578a9742.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/63.95e6ff4f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/64.054ab297.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/65.5be33d9b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/66.2312529e.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/67.81dd084d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/68.a11966f3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/69.ffbf7d57.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/7.b4d90be9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/70.51883659.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/71.9ff55cae.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/72.d54e184f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/73.5062fbf7.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/74.0721cccd.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/75.42dd3581.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/76.d590fa57.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/77.0e5953f3.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/78.4bb79720.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/79.48030292.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/80.d036bc22.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/81.d6524746.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/82.93460687.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/83.7c6f2e4a.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/84.83b1808d.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/85.14c12ffc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/86.893b5c41.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/87.7d10879f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/88.ef12068f.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/89.cc81e4e4.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/90.130454fc.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/91.838da398.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/92.22813cd9.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/93.2000427b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/94.062717c8.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/95.9cc81974.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/96.0457546b.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/97.71d6bbd5.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/98.e6299973.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/99.b198a395.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~docsearch.00f0a528.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~flowchart.d07b8b19.js"><link rel="prefetch" href="/Linux_All_in_one/assets/js/vendors~notification.877bb3fc.js">
    <link rel="stylesheet" href="/Linux_All_in_one/assets/css/0.styles.407428ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Linux_All_in_one/" class="home-link router-link-active"><img src="/Linux_All_in_one/images/dunwu-logo-100.png" alt="Linux_All_in_one" class="logo"> <span class="site-name can-hide">Linux_All_in_one</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Linux_All_in_one/linux/cli/" class="nav-link">
  ğŸ’» Linux å‘½ä»¤
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/ops/" class="nav-link">
  âš™ï¸ Linux è¿ç»´
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/soft/" class="nav-link router-link-active">
  ğŸ“¦ Linux è½¯ä»¶è¿ç»´
</a></div><div class="nav-item"><a href="/Linux_All_in_one/docker/" class="nav-link">
  ğŸ³ Docker æ•™ç¨‹
</a></div><div class="nav-item"><a href="/Linux_All_in_one/Cybersecurity/" class="nav-link">
  ğŸ”’ Linuxä¸ç½‘ç»œå®‰å…¨
</a></div> <a href="https://github.com/adminlove520/Linux_All_in_one" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Linux_All_in_one/linux/cli/" class="nav-link">
  ğŸ’» Linux å‘½ä»¤
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/ops/" class="nav-link">
  âš™ï¸ Linux è¿ç»´
</a></div><div class="nav-item"><a href="/Linux_All_in_one/linux/soft/" class="nav-link router-link-active">
  ğŸ“¦ Linux è½¯ä»¶è¿ç»´
</a></div><div class="nav-item"><a href="/Linux_All_in_one/docker/" class="nav-link">
  ğŸ³ Docker æ•™ç¨‹
</a></div><div class="nav-item"><a href="/Linux_All_in_one/Cybersecurity/" class="nav-link">
  ğŸ”’ Linuxä¸ç½‘ç»œå®‰å…¨
</a></div> <a href="https://github.com/adminlove520/Linux_All_in_one" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Nginx å®‰è£…å’Œé…ç½®</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-è¯´æ˜" class="sidebar-link">Nginx è¯´æ˜</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#æ¥è‡ªç½‘ç»œä¸Šçš„ä¸€ä¸ªå¥½ä»‹ç»" class="sidebar-link">æ¥è‡ªç½‘ç»œä¸Šçš„ä¸€ä¸ªå¥½ä»‹ç»</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-çš„-docker-éƒ¨ç½²" class="sidebar-link">Nginx çš„ Docker éƒ¨ç½²</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#yum-å®‰è£…-ç‰ˆæœ¬ä¸€èˆ¬æ»ååŠå¹´å·¦å³" class="sidebar-link">YUM å®‰è£…ï¼ˆç‰ˆæœ¬ä¸€èˆ¬æ»ååŠå¹´å·¦å³ï¼‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-æºç ç¼–è¯‘å®‰è£…-å¸¦-prometheus-æ¨¡å—" class="sidebar-link">Nginx æºç ç¼–è¯‘å®‰è£…ï¼ˆå¸¦ Prometheus æ¨¡å—ï¼‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-æºç ç¼–è¯‘å®‰è£…-å¸¦ç›‘æ§æ¨¡å—" class="sidebar-link">Nginx æºç ç¼–è¯‘å®‰è£…ï¼ˆå¸¦ç›‘æ§æ¨¡å—ï¼‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#æŠŠ-nginx-æ·»åŠ åˆ°ç³»ç»ŸæœåŠ¡ä¸­" class="sidebar-link">æŠŠ Nginx æ·»åŠ åˆ°ç³»ç»ŸæœåŠ¡ä¸­</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-æ— ç¼å‡çº§" class="sidebar-link">Nginx æ— ç¼å‡çº§</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#ä¸º-nginx-æ·»åŠ -basic-auth" class="sidebar-link">ä¸º Nginx æ·»åŠ  basic_auth</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-å…¨å±€å˜é‡" class="sidebar-link">Nginx å…¨å±€å˜é‡</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-é…ç½®" class="sidebar-link">Nginx é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-åœ¨-1-8-1-ç‰ˆæœ¬ä¸‹çš„é»˜è®¤é…ç½®-å»æ‰æ³¨é‡Š" class="sidebar-link">Nginx åœ¨ 1.8.1 ç‰ˆæœ¬ä¸‹çš„é»˜è®¤é…ç½®ï¼ˆå»æ‰æ³¨é‡Šï¼‰</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#http-æœåŠ¡-è™šæ‹Ÿä¸»æœº" class="sidebar-link">HTTP æœåŠ¡ï¼Œè™šæ‹Ÿä¸»æœº</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡" class="sidebar-link">åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#é…ç½®-https-æœåŠ¡-ssl-è¯ä¹¦é…ç½®" class="sidebar-link">é…ç½® HTTPS æœåŠ¡ï¼ˆSSL è¯ä¹¦é…ç½®ï¼‰</a></li></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-å‹åŠ›æµ‹è¯•" class="sidebar-link">Nginx å‹åŠ›æµ‹è¯•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-å¸¸è§„ä¼˜åŒ–" class="sidebar-link">Nginx å¸¸è§„ä¼˜åŒ–</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-ç›‘æ§æ¨¡å—" class="sidebar-link">Nginx ç›‘æ§æ¨¡å—</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-é…ç½®æ–‡ä»¶å¸¸ç”¨é…ç½®ç§¯ç´¯" class="sidebar-link">Nginx é…ç½®æ–‡ä»¶å¸¸ç”¨é…ç½®ç§¯ç´¯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#location-é…ç½®" class="sidebar-link">location é…ç½®</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#é“¾æ¥-aa-ä¸‹-æŸ¥è¯¢å‚æ•°åŒ…å«-bb" class="sidebar-link">é“¾æ¥ aa ä¸‹ï¼ŒæŸ¥è¯¢å‚æ•°åŒ…å« bb</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#http-æœåŠ¡-ç»‘å®šå¤šä¸ªåŸŸå" class="sidebar-link">HTTP æœåŠ¡ï¼Œç»‘å®šå¤šä¸ªåŸŸå</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—" class="sidebar-link">å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#ç”Ÿæˆè§„æ ¼å›¾" class="sidebar-link">ç”Ÿæˆè§„æ ¼å›¾</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#å¯ç”¨-gzip-å‹ç¼©" class="sidebar-link">å¯ç”¨ Gzip å‹ç¼©</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#é˜²ç›—é“¾" class="sidebar-link">é˜²ç›—é“¾</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-ç¦æ­¢ç‰¹å®šç”¨æˆ·ä»£ç†-user-agents-è®¿é—®-é™æ­¢æŒ‡å®š-ip-è®¿é—®" class="sidebar-link">Nginx ç¦æ­¢ç‰¹å®šç”¨æˆ·ä»£ç†ï¼ˆUser Agentsï¼‰è®¿é—®ï¼Œé™æ­¢æŒ‡å®š IP è®¿é—®</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-ç¼“å­˜" class="sidebar-link">Nginx ç¼“å­˜</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-è‡ªåŠ¨åˆ†å‰²æ—¥å¿—æ–‡ä»¶" class="sidebar-link">Nginx è‡ªåŠ¨åˆ†å‰²æ—¥å¿—æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#nginx-å¤„ç†è·¨åŸŸè¯·æ±‚" class="sidebar-link">Nginx å¤„ç†è·¨åŸŸè¯·æ±‚</a></li><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#å®‰å…¨ç›¸é¢„é˜²" class="sidebar-link">å®‰å…¨ç›¸é¢„é˜²</a></li></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#ä½¿ç”¨-logrotate-åš-nginx-æ—¥å¿—è½®è¯¢åˆ†å‰²" class="sidebar-link">ä½¿ç”¨ logrotate åš nginx æ—¥å¿—è½®è¯¢åˆ†å‰²</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#æ‚ä¸ƒæ‚å…«" class="sidebar-link">æ‚ä¸ƒæ‚å…«</a></li></ul></li><li><a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.html#èµ„æ–™" class="sidebar-link">èµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nginx-å®‰è£…å’Œé…ç½®"><a href="#nginx-å®‰è£…å’Œé…ç½®" class="header-anchor">#</a> Nginx å®‰è£…å’Œé…ç½®</h1> <h2 id="nginx-è¯´æ˜"><a href="#nginx-è¯´æ˜" class="header-anchor">#</a> Nginx è¯´æ˜</h2> <ul><li>Nginx æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„é«˜æ€§èƒ½ Web å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå¸¸è¢«æˆ‘ä»¬ç”¨ä½œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºé‚®ä»¶ä»£ç†æœåŠ¡å™¨</li> <li>Nginx WIKIï¼š<a href="https://zh.wikipedia.org/zh/Nginx" target="_blank" rel="noopener noreferrer">https://zh.wikipedia.org/zh/Nginx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Nginx ç™¾ç§‘ï¼š<a href="http://baike.baidu.com/item/nginx" target="_blank" rel="noopener noreferrer">http://baike.baidu.com/item/nginx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Nginx å®˜ç½‘ï¼š<a href="http://nginx.org/en/" target="_blank" rel="noopener noreferrer">http://nginx.org/en/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Nginx å®˜ç½‘ä¸‹è½½ï¼š<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">http://nginx.org/en/download.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>æºç åŒ…æ–¹å¼ä¸‹è½½ï¼š<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">http://nginx.org/en/download.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œæ³¨æ„è¯¥é¡µé¢çš„ï¼š<code>Stable version</code>ï¼Œè¿™ä¸ªè¡¨ç¤ºç¨³å®šç‰ˆæœ¬ï¼Œ2016-03-22 æœ€æ–°ç‰ˆæœ¬æ˜¯ï¼š<code>nginx-1.8.1</code>ï¼Œè¿™æ˜¯ä¸€ä¸ª  <strong>tar.gz</strong> çš„æ–‡ä»¶é“¾æ¥ã€‚</li> <li>æ„å»ºåŒ…æ–¹å¼ä¸‹è½½ï¼š<a href="http://nginx.org/en/linux_packages.html#stable" target="_blank" rel="noopener noreferrer">http://nginx.org/en/linux_packages.html#stable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>Nginx æ–‡æ¡£ï¼š
<ul><li>ä¼˜å…ˆï¼š<a href="https://www.nginx.com/resources/wiki/" target="_blank" rel="noopener noreferrer">https://www.nginx.com/resources/wiki/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>æ¬¡è¦ï¼š<a href="http://nginx.org/en/docs/" target="_blank" rel="noopener noreferrer">http://nginx.org/en/docs/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>Nginx æ¨¡å—åœ°å€ï¼š<a href="https://www.nginx.com/resources/wiki/modules/" target="_blank" rel="noopener noreferrer">https://www.nginx.com/resources/wiki/modules/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="æ¥è‡ªç½‘ç»œä¸Šçš„ä¸€ä¸ªå¥½ä»‹ç»"><a href="#æ¥è‡ªç½‘ç»œä¸Šçš„ä¸€ä¸ªå¥½ä»‹ç»" class="header-anchor">#</a> æ¥è‡ªç½‘ç»œä¸Šçš„ä¸€ä¸ªå¥½ä»‹ç»</h2> <ul><li>æ¥æºï¼š<a href="https://help.aliyun.com/knowledge_detail/6703521.html?spm=5176.788314854.2.2.CdMGlB" target="_blank" rel="noopener noreferrer">https://help.aliyun.com/knowledge_detail/6703521.html?spm=5176.788314854.2.2.CdMGlB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><ul><li>ä¼ ç»Ÿä¸ŠåŸºäºè¿›ç¨‹æˆ–çº¿ç¨‹æ¨¡å‹æ¶æ„çš„ Web æœåŠ¡é€šè¿‡æ¯è¿›ç¨‹æˆ–æ¯çº¿ç¨‹å¤„ç†å¹¶å‘è¿æ¥è¯·æ±‚ï¼Œè¿™åŠ¿å¿…ä¼šåœ¨ç½‘ç»œå’Œ I/O æ“ä½œæ—¶äº§ç”Ÿé˜»å¡ï¼Œå…¶å¦ä¸€ä¸ªå¿…ç„¶ç»“æœåˆ™æ˜¯å¯¹å†…å­˜æˆ– CPU çš„åˆ©ç”¨ç‡ä½ä¸‹ã€‚ç”Ÿæˆä¸€ä¸ªæ–°çš„è¿›ç¨‹/çº¿ç¨‹éœ€è¦äº‹å…ˆå¤‡å¥½å…¶è¿è¡Œæ—¶ç¯å¢ƒï¼Œè¿™åŒ…æ‹¬ä¸ºå…¶åˆ†é…å †å†…å­˜å’Œæ ˆå†…å­˜ï¼Œä»¥åŠä¸ºå…¶åˆ›å»ºæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ç­‰ã€‚è¿™äº›æ“ä½œéƒ½éœ€è¦å ç”¨ CPUï¼Œè€Œä¸”è¿‡å¤šçš„è¿›ç¨‹/çº¿ç¨‹è¿˜ä¼šå¸¦æ¥çº¿ç¨‹æŠ–åŠ¨æˆ–é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç³»ç»Ÿæ€§èƒ½ä¹Ÿä¼šç”±æ­¤è¿›ä¸€æ­¥ä¸‹é™ã€‚</li> <li>åœ¨è®¾è®¡çš„æœ€åˆé˜¶æ®µï¼ŒNginx çš„ä¸»è¦ç€çœ¼ç‚¹å°±æ˜¯å…¶é«˜æ€§èƒ½ä»¥åŠå¯¹ç‰©ç†è®¡ç®—èµ„æºçš„é«˜å¯†åº¦åˆ©ç”¨ï¼Œå› æ­¤å…¶é‡‡ç”¨äº†ä¸åŒçš„æ¶æ„æ¨¡å‹ã€‚å—å¯å‘äºå¤šç§æ“ä½œç³»ç»Ÿè®¾è®¡ä¸­åŸºäºâ€œäº‹ä»¶â€çš„é«˜çº§å¤„ç†æœºåˆ¶ï¼Œnginxé‡‡ç”¨äº†æ¨¡å—åŒ–ã€äº‹ä»¶é©±åŠ¨ã€å¼‚æ­¥ã€å•çº¿ç¨‹åŠéé˜»å¡çš„æ¶æ„ï¼Œå¹¶å¤§é‡é‡‡ç”¨äº†å¤šè·¯å¤ç”¨åŠäº‹ä»¶é€šçŸ¥æœºåˆ¶ã€‚åœ¨ Nginx ä¸­ï¼Œè¿æ¥è¯·æ±‚ç”±ä¸ºæ•°ä¸å¤šçš„å‡ ä¸ªä»…åŒ…å«ä¸€ä¸ªçº¿ç¨‹çš„è¿›ç¨‹ Worker ä»¥é«˜æ•ˆçš„å›ç¯(run-loop)æœºåˆ¶è¿›è¡Œå¤„ç†ï¼Œè€Œæ¯ä¸ª Worker å¯ä»¥å¹¶è¡Œå¤„ç†æ•°åƒä¸ªçš„å¹¶å‘è¿æ¥åŠè¯·æ±‚ã€‚</li> <li>å¦‚æœè´Ÿè½½ä»¥ CPU å¯†é›†å‹åº”ç”¨ä¸ºä¸»ï¼Œå¦‚ SSL æˆ–å‹ç¼©åº”ç”¨ï¼Œåˆ™ Worker æ•°åº”ä¸ CPU æ•°ç›¸åŒï¼›å¦‚æœè´Ÿè½½ä»¥ IO å¯†é›†å‹ä¸ºä¸»ï¼Œå¦‚å“åº”å¤§é‡å†…å®¹ç»™å®¢æˆ·ç«¯ï¼Œåˆ™ Worker æ•°åº”è¯¥ä¸º CPU ä¸ªæ•°çš„ 1.5 æˆ– 2 å€ã€‚</li> <li>Nginxä¼šæŒ‰éœ€åŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼šä¸€ä¸ªä¸»è¿›ç¨‹(Master)å’Œå‡ ä¸ªå·¥ä½œè¿›ç¨‹(Worker)ï¼Œé…ç½®äº†ç¼“å­˜æ—¶è¿˜ä¼šæœ‰ç¼“å­˜åŠ è½½å™¨è¿›ç¨‹(Cache Loader)å’Œç¼“å­˜ç®¡ç†å™¨è¿›ç¨‹(Cache Manager)ç­‰ã€‚æ‰€æœ‰è¿›ç¨‹å‡æ˜¯ä»…å«æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸»è¦é€šè¿‡â€œå…±äº«å†…å­˜â€çš„æœºåˆ¶å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸»è¿›ç¨‹ä»¥rootç”¨æˆ·èº«ä»½è¿è¡Œï¼Œè€Œ Workerã€Cache Loader å’Œ Cache manager å‡åº”ä»¥éç‰¹æƒç”¨æˆ·èº«ä»½è¿è¡Œã€‚</li> <li>ä¸»è¿›ç¨‹ä¸»è¦å®Œæˆå¦‚ä¸‹å·¥ä½œï¼š
- 1.è¯»å–å¹¶éªŒæ­£é…ç½®ä¿¡æ¯ï¼›
- 2.åˆ›å»ºã€ç»‘å®šåŠå…³é—­å¥—æ¥å­—ï¼›
- 3.å¯åŠ¨ã€ç»ˆæ­¢åŠç»´æŠ¤workerè¿›ç¨‹çš„ä¸ªæ•°ï¼›
- 4.æ— é¡»ä¸­æ­¢æœåŠ¡è€Œé‡æ–°é…ç½®å·¥ä½œç‰¹æ€§ï¼›
- 5.æ§åˆ¶éä¸­æ–­å¼ç¨‹åºå‡çº§ï¼Œå¯ç”¨æ–°çš„äºŒè¿›åˆ¶ç¨‹åºå¹¶åœ¨éœ€è¦æ—¶å›æ»šè‡³è€ç‰ˆæœ¬ï¼›
- 6.é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ï¼Œå®ç°æ—¥å¿—æ»šåŠ¨ï¼›
- 7.ç¼–è¯‘åµŒå…¥å¼perlè„šæœ¬ï¼›</li> <li>Worker è¿›ç¨‹ä¸»è¦å®Œæˆçš„ä»»åŠ¡åŒ…æ‹¬ï¼š
- 1.æ¥æ”¶ã€ä¼ å…¥å¹¶å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥ï¼›
- 2.æä¾›åå‘ä»£ç†åŠè¿‡æ»¤åŠŸèƒ½ï¼›
- 3.nginxä»»ä½•èƒ½å®Œæˆçš„å…¶å®ƒä»»åŠ¡ï¼›</li> <li>Cache Loader è¿›ç¨‹ä¸»è¦å®Œæˆçš„ä»»åŠ¡åŒ…æ‹¬ï¼š
- 1.æ£€æŸ¥ç¼“å­˜å­˜å‚¨ä¸­çš„ç¼“å­˜å¯¹è±¡ï¼›
- 2.ä½¿ç”¨ç¼“å­˜å…ƒæ•°æ®å»ºç«‹å†…å­˜æ•°æ®åº“ï¼›</li> <li>Cache Manager è¿›ç¨‹çš„ä¸»è¦ä»»åŠ¡ï¼š
- 1.ç¼“å­˜çš„å¤±æ•ˆåŠè¿‡æœŸæ£€éªŒï¼›</li></ul></blockquote> <h2 id="nginx-çš„-docker-éƒ¨ç½²"><a href="#nginx-çš„-docker-éƒ¨ç½²" class="header-anchor">#</a> Nginx çš„ Docker éƒ¨ç½²</h2> <ul><li>é¢„è®¾å¥½ç›®å½•ï¼Œåœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºä¸‹é¢ç›®å½•ï¼š<code>mkdir -p /data/docker/nginx/logs /data/docker/nginx/conf</code></li> <li><strong>é‡ç‚¹</strong>ï¼šå…ˆå‡†å¤‡å¥½ä½ çš„ nginx.conf æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨å®¿ä¸»æœºçš„ï¼š<code>vim /data/docker/nginx/conf/nginx.conf</code> ç›®å½•ä¸‹ï¼Œç­‰ä¸‹éœ€è¦æ˜ å°„ã€‚</li></ul> <div class="language- extra-class"><pre class="language-text"><code>worker_processes      1;

events {
  worker_connections  1024;
}

http {
  include             mime.types;
  default_type        application/octet-stream;

  sendfile on;

  keepalive_timeout   65;

  server {
    listen            80;
    server_name       localhost 127.0.0.1 193.112.221.203 youmeek.com;

    location / {
      root            /usr/share/nginx/html;
      index           index.html index.htm;
    }
  }
}
</code></pre></div><ul><li>å®˜ç½‘é•œåƒï¼š<a href="https://hub.docker.com/_/nginx/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/_/nginx/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>ä¸‹è½½é•œåƒï¼š<code>docker pull nginx:1.12.2</code></li> <li>è¿è¡Œå®¹å™¨ï¼š<code>docker run --name youmeek-nginx -p 80:80 -v /data/docker/nginx/logs:/var/log/nginx -v /data/docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf:ro -d nginx:1.12.2</code></li> <li>é‡æ–°åŠ è½½é…ç½®ï¼ˆç›®å‰æµ‹è¯•æ— æ•ˆï¼Œåªèƒ½é‡å¯æœåŠ¡ï¼‰ï¼š<code>docker exec -it youmeek-nginx nginx -s reload</code></li> <li>åœæ­¢æœåŠ¡ï¼š<code>docker exec -it youmeek-nginx nginx -s stop</code> æˆ–è€…ï¼š<code>docker stop youmeek-nginx</code></li> <li>é‡æ–°å¯åŠ¨æœåŠ¡ï¼š<code>docker restart youmeek-nginx</code></li></ul> <hr> <h2 id="yum-å®‰è£…-ç‰ˆæœ¬ä¸€èˆ¬æ»ååŠå¹´å·¦å³"><a href="#yum-å®‰è£…-ç‰ˆæœ¬ä¸€èˆ¬æ»ååŠå¹´å·¦å³" class="header-anchor">#</a> YUM å®‰è£…ï¼ˆç‰ˆæœ¬ä¸€èˆ¬æ»ååŠå¹´å·¦å³ï¼‰</h2> <ul><li>å®‰è£…ï¼š<code>yum install -y nginx</code>ï¼ŒåŒæ—¶å¢åŠ äº†ä¸€ä¸ª nginx ç”¨æˆ·ç»„å’Œç”¨æˆ·</li> <li>é»˜è®¤é…ç½®æ–‡ä»¶ä½ç½®ï¼š<code>vim /etc/nginx/nginx.conf</code></li> <li>å…¶ä»–é…ç½®æ–‡ä»¶ä½ç½®ï¼š<code>cd /etc/nginx/conf.d/</code></li> <li>æ¨¡å—é…ç½®æ–‡ä»¶ä½ç½®ï¼š<code>cd /usr/share/nginx/modules/</code></li> <li>é»˜è®¤ HTML é™æ€æ–‡ä»¶ä½ç½®ï¼š<code>cd /usr/share/nginx/html</code></li> <li>log å­˜æ”¾ç›®å½•ï¼š<code>cd /var/log/nginx/</code></li> <li>çŠ¶æ€ï¼š<code>systemctl status nginx</code></li> <li>å¯åŠ¨ï¼š<code>systemctl start nginx</code></li> <li>å¯åŠ¨ï¼š<code>systemctl stop nginx</code></li> <li>åˆ·æ–°é…ç½®ï¼š<code>nginx -s reload</code></li> <li>æŸ¥çœ‹ç‰ˆæœ¬å’Œ YUM è‡ªå¸¦çš„æ¨¡å—ï¼š<code>nginx -V</code></li></ul> <hr> <h2 id="nginx-æºç ç¼–è¯‘å®‰è£…-å¸¦-prometheus-æ¨¡å—"><a href="#nginx-æºç ç¼–è¯‘å®‰è£…-å¸¦-prometheus-æ¨¡å—" class="header-anchor">#</a> Nginx æºç ç¼–è¯‘å®‰è£…ï¼ˆå¸¦ Prometheus æ¨¡å—ï¼‰</h2> <div class="language- extra-class"><pre class="language-text"><code>./configure \
--prefix=/usr/local/nginx \
--pid-path=/var/local/nginx/nginx.pid \
--lock-path=/var/lock/nginx/nginx.lock \
--error-log-path=/var/log/nginx/error.log \
--http-log-path=/var/log/nginx/access.log \
--with-http_gzip_static_module \
--http-client-body-temp-path=/var/temp/nginx/client \
--http-proxy-temp-path=/var/temp/nginx/proxy \
--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \
--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \
--with-http_ssl_module \
--with-http_stub_status_module \
--http-scgi-temp-path=/var/temp/nginx/scgi \
--add-module=/usr/local/nginx-module-vts
</code></pre></div><h2 id="nginx-æºç ç¼–è¯‘å®‰è£…-å¸¦ç›‘æ§æ¨¡å—"><a href="#nginx-æºç ç¼–è¯‘å®‰è£…-å¸¦ç›‘æ§æ¨¡å—" class="header-anchor">#</a> Nginx æºç ç¼–è¯‘å®‰è£…ï¼ˆå¸¦ç›‘æ§æ¨¡å—ï¼‰</h2> <ul><li>å®˜ç½‘ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆæœ¬ <strong>1.8.1</strong>ï¼Œå¤§å°ï¼š814K</li> <li>å®˜ç½‘å®‰è£…è¯´æ˜ï¼š<a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/install/" target="_blank" rel="noopener noreferrer">https://www.nginx.com/resources/wiki/start/topics/tutorials/install/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>æºç ç¼–è¯‘é…ç½®å‚æ•°è¯´æ˜ï¼š
<ul><li><a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/installoptions/" target="_blank" rel="noopener noreferrer">https://www.nginx.com/resources/wiki/start/topics/tutorials/installoptions/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://nginx.org/en/docs/configure.html" target="_blank" rel="noopener noreferrer">http://nginx.org/en/docs/configure.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>å¼€å§‹å®‰è£…ï¼š
<ul><li>å®‰è£…ä¾èµ–åŒ…ï¼š<code>yum install -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel</code></li> <li>é¢„è®¾å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–¹ä¾¿ç­‰ä¸‹å®‰è£…çš„æ—¶å€™æœ‰äº›æ–‡ä»¶å¯ä»¥è¿›è¡Œå­˜æ”¾ï¼š
<ul><li><code>mkdir -p /usr/local/nginx /var/log/nginx /var/temp/nginx /var/lock/nginx</code></li></ul></li> <li>ä¸‹è½½æºç åŒ…ï¼š<code>wget http://nginx.org/download/nginx-1.8.1.tar.gz</code></li> <li>è§£å‹ï¼š<code>tar zxvf nginx-1.8.1.tar.gz</code></li> <li>è¿›å…¥è§£å‹åç›®å½•ï¼š<code>cd nginx-1.8.1/</code></li> <li>ç¼–è¯‘é…ç½®ï¼š</li></ul></li></ul> <div class="language-ini extra-class"><pre class="language-ini"><code>./configure \
<span class="token key attr-name">--prefix</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/nginx \</span>
<span class="token key attr-name">--pid-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/local/nginx/nginx.pid \</span>
<span class="token key attr-name">--lock-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/lock/nginx/nginx.lock \</span>
<span class="token key attr-name">--error-log-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/log/nginx/error.log \</span>
<span class="token key attr-name">--http-log-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/log/nginx/access.log \</span>
--with-http_gzip_static_module \
<span class="token key attr-name">--http-client-body-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/client \</span>
<span class="token key attr-name">--http-proxy-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/proxy \</span>
<span class="token key attr-name">--http-fastcgi-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/fastcgi \</span>
<span class="token key attr-name">--http-uwsgi-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/uwsgi \</span>
--with-http_ssl_module \
--with-http_stub_status_module \
<span class="token key attr-name">--http-scgi-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/scgi</span>
</code></pre></div><ul><li>ç¼–è¯‘ï¼š<code>make</code></li> <li>å®‰è£…ï¼š<code>make install</code></li> <li>å¯åŠ¨ Nginx
<ul><li>å…ˆæ£€æŸ¥æ˜¯å¦åœ¨ /usr/local ç›®å½•ä¸‹ç”Ÿæˆäº† Nginx ç­‰ç›¸å…³æ–‡ä»¶ï¼š<code>cd /usr/local/nginx;ll</code>ï¼Œæ­£å¸¸çš„æ•ˆæœåº”è¯¥æ˜¯æ˜¾ç¤ºè¿™æ ·çš„ï¼š</li></ul></li></ul> <div class="language-nginx extra-class"><pre class="language-nginx"><code>drwxr-xr-x. 2 root root 4096 3æœˆ  22 16:21 conf
drwxr-xr-x. 2 root root 4096 3æœˆ  22 16:21 html
drwxr-xr-x. 2 root root 4096 3æœˆ  22 16:21 sbin
</code></pre></div><ul><li>å¦‚æœè¦æ£€æŸ¥åˆšåˆšç¼–è¯‘çš„å“ªäº›æ¨¡å—ï¼Œå¯ä»¥ï¼š<code>nginx -V</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>nginx version: nginx/1.8.0
built by gcc 4.4.7 20120313 (Red Hat 4.4.7-18) (GCC)
built with OpenSSL 1.0.1e-fips 11 Feb 2013
TLS SNI support enabled
configure arguments: --user=nginx --group=nginx --prefix=/usr/local/nginx --pid-path=/usr/local/nginx/run/nginx.pid --lock-path=/usr/local/nginx/lock/nginx.lock --with-http_ssl_module --with-http_dav_module --with-http_flv_module --with-http_gzip_static_module --with-http_stub_status_module
</code></pre></div><ul><li>åœæ­¢é˜²ç«å¢™ï¼š<code>service iptables stop</code> <ul><li>æˆ–æ˜¯æŠŠ 80 ç«¯å£åŠ å…¥åˆ°çš„æ’é™¤åˆ—è¡¨ï¼š</li> <li><code>sudo iptables -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT</code></li> <li><code>sudo service iptables save</code></li> <li><code>sudo service iptables restart</code></li></ul></li> <li>å¯åŠ¨ï¼š<code>/usr/local/nginx/sbin/nginx</code>ï¼Œå¯åŠ¨å®Œæˆ shell æ˜¯ä¸ä¼šæœ‰è¾“å‡ºçš„</li> <li>æ£€æŸ¥ æ—¶å€™æœ‰ Nginx è¿›ç¨‹ï¼š<code>ps aux | grep nginx</code>ï¼Œæ­£å¸¸æ˜¯æ˜¾ç¤º 3 ä¸ªç»“æœå‡ºæ¥</li> <li>æ£€æŸ¥ Nginx æ˜¯å¦å¯åŠ¨å¹¶ç›‘å¬äº† 80 ç«¯å£ï¼š<code>netstat -ntulp | grep 80</code></li> <li>è®¿é—®ï¼š<code>192.168.1.114</code>ï¼Œå¦‚æœèƒ½çœ‹åˆ°ï¼š<code>Welcome to nginx!</code>ï¼Œå³å¯è¡¨ç¤ºå®‰è£…æˆåŠŸ</li> <li>æ£€æŸ¥ Nginx å¯ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯å“ªä¸ªï¼š<code>/usr/local/nginx/sbin/nginx -t</code></li> <li>åˆ·æ–° Nginx é…ç½®åé‡å¯ï¼š<code>/usr/local/nginx/sbin/nginx -s reload</code></li> <li>åœæ­¢ Nginxï¼š<code>/usr/local/nginx/sbin/nginx -s stop</code></li> <li>å¦‚æœè®¿é—®ä¸äº†ï¼Œæˆ–æ˜¯å‡ºç°å…¶ä»–ä¿¡æ¯çœ‹ä¸‹é”™è¯¯ç«‹å³ï¼š<code>vim /var/log/nginx/error.log</code></li></ul> <h2 id="æŠŠ-nginx-æ·»åŠ åˆ°ç³»ç»ŸæœåŠ¡ä¸­"><a href="#æŠŠ-nginx-æ·»åŠ åˆ°ç³»ç»ŸæœåŠ¡ä¸­" class="header-anchor">#</a> æŠŠ Nginx æ·»åŠ åˆ°ç³»ç»ŸæœåŠ¡ä¸­</h2> <ul><li>æ–°å»ºæ–‡ä»¶ï¼š<code>vim /etc/init.d/nginx</code></li> <li>æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</li></ul> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token comment">#!/bin/bash</span>


<span class="token comment">#nginxæ‰§è¡Œç¨‹åºè·¯å¾„éœ€è¦ä¿®æ”¹</span>
<span class="token directive"><span class="token keyword">nginxd=/usr/local/nginx/sbin/nginx</span>

<span class="token comment"># nginxé…ç½®æ–‡ä»¶è·¯å¾„éœ€è¦ä¿®æ”¹</span>
nginx_config=/usr/local/nginx/conf/nginx.conf

<span class="token comment"># pid åœ°å€éœ€è¦ä¿®æ”¹</span>
nginx_pid=/var/local/nginx/nginx.pid


RETVAL=0
prog=<span class="token string">&quot;nginx&quot;</span>

<span class="token comment"># Source function library.</span>
. /etc/rc.d/init.d/functions
<span class="token comment"># Source networking configuration.</span>
. /etc/sysconfig/network
<span class="token comment"># Check that networking is up.</span>
[ $</span><span class="token punctuation">{</span>NETWORKING<span class="token punctuation">}</span> = &quot;no&quot; ] &amp;&amp; <span class="token directive"><span class="token keyword">exit</span> <span class="token number">0</span>
[ -x <span class="token variable">$nginxd</span> ] || exit <span class="token number">0</span>

<span class="token comment"># Start nginx daemons functions.</span>
start()</span> <span class="token punctuation">{</span>
<span class="token directive"><span class="token keyword">if</span> [ -e <span class="token variable">$nginx_pid</span> ]</span><span class="token punctuation">;</span>then
   <span class="token directive"><span class="token keyword">echo</span> <span class="token string">&quot;nginx already running....&quot;</span>
   exit <span class="token number">1</span>
fi

echo -n $<span class="token string">&quot;Starting <span class="token variable">$prog</span>: &quot;</span>
daemon <span class="token variable">$nginxd</span> -c $</span><span class="token punctuation">{</span>nginx_config<span class="token punctuation">}</span>
RETVAL=$?
echo
[ $RETVAL = 0 ] &amp;&amp; touch /var/lock/subsys/nginx
return $RETVAL
<span class="token punctuation">}</span>

<span class="token comment"># Stop nginx daemons functions.</span>
<span class="token comment"># pid åœ°å€éœ€è¦ä¿®æ”¹</span>
<span class="token directive"><span class="token keyword">stop()</span></span> <span class="token punctuation">{</span>
	echo -n $&quot;Stopping $prog: &quot;
	killproc $nginxd
	RETVAL=$?
	echo
	[ $RETVAL = 0 ] &amp;&amp; rm -f /var/lock/subsys/nginx /var/local/nginx/nginx.pid
<span class="token punctuation">}</span>

<span class="token comment"># reload nginx service functions.</span>
<span class="token directive"><span class="token keyword">reload()</span></span> <span class="token punctuation">{</span>
	echo -n $&quot;Reloading $prog: &quot;
	<span class="token comment">#kill -HUP `cat ${nginx_pid}`</span>
	killproc $nginxd -HUP
	RETVAL=$?
	echo
<span class="token punctuation">}</span>

<span class="token comment"># See how we were called.</span>
<span class="token directive"><span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> in
	start)
		start</span>
		<span class="token punctuation">;</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">stop)</span>
		stop</span>
		<span class="token punctuation">;</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">reload)</span>
		reload</span>
		<span class="token punctuation">;</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">restart)</span>
		stop
		start</span>
		<span class="token punctuation">;</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">status)</span>
		status <span class="token variable">$prog</span>
		RETVAL=$?</span>
		<span class="token punctuation">;</span><span class="token punctuation">;</span>
	*)

	echo $&quot;Usage: $prog <span class="token punctuation">{</span>start|stop|restart|reload|status|help<span class="token punctuation">}</span>&quot;
	exit 1

esac
exit $RETVAL
</code></pre></div><ul><li>ä¿®æ”¹æƒé™ï¼š<code>chmod 755 /etc/init.d/nginx</code></li> <li>å¯åŠ¨æœåŠ¡ï¼š<code>service nginx start</code></li> <li>åœæ­¢æœåŠ¡ï¼š<code>service nginx stop</code></li> <li>é‡å¯æœåŠ¡ï¼š<code>service nginx restart</code></li></ul> <h2 id="nginx-æ— ç¼å‡çº§"><a href="#nginx-æ— ç¼å‡çº§" class="header-anchor">#</a> Nginx æ— ç¼å‡çº§</h2> <ul><li>ä½¿ç”¨æ–°çš„å‚æ•°<code>configure</code>åæ‰§è¡Œ<code>make</code>é‡æ–°ç¼–è¯‘,æ³¨æ„ä¹‹åä¸è¦æ‰§è¡Œ<code>make install</code>.æ–°æ„å»ºçš„Nginxä¼šåœ¨<code>objs</code>ç›®å½•ä¸‹</li> <li>å¤‡ä»½æ—§çš„Nginx <code>cp è€çš„nginxç›®å½•/sbin/nginx è€çš„nginxç›®å½•/sbin/nginx.old</code></li> <li>å¤åˆ¶æ–°çš„Nginx <code>cp ./objs/nginx è€çš„nginxç›®å½•/sbin/</code>,å¯èƒ½æç¤ºNginxè¢«å ç”¨,å¦‚æœæ˜¯åˆ™å¼ºåˆ¶è¦†ç›–å³å¯.</li> <li>æ£€æŸ¥ä¸‹Makefileçš„æ›´æ–°æŒ‡ä»¤ <code>cat Makefile</code>,æ£€æŸ¥ä¸‹è·¯å¾„æ˜¯å¦åŒ¹é…,ä¸€èˆ¬æ²¡ä»€ä¹ˆé—®é¢˜æ¯•ç«Ÿæ˜¯æ ¹æ®ä½ çš„å‚æ•°ç”Ÿæˆçš„æ–‡ä»¶.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>upgrade:
	/usr/local/nginx/sbin/nginx <span class="token parameter variable">-t</span>

	<span class="token function">kill</span> <span class="token parameter variable">-USR2</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /var/local/nginx/nginx.pid<span class="token variable">`</span></span>
	<span class="token function">sleep</span> <span class="token number">1</span>
	<span class="token builtin class-name">test</span> <span class="token parameter variable">-f</span> /var/local/nginx/nginx.pid.oldbin

	<span class="token function">kill</span> <span class="token parameter variable">-QUIT</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /var/local/nginx/nginx.pid.oldbin<span class="token variable">`</span></span>
</code></pre></div><ul><li>æ›´æ–° <code>make upgrade</code></li></ul> <h2 id="ä¸º-nginx-æ·»åŠ -basic-auth"><a href="#ä¸º-nginx-æ·»åŠ -basic-auth" class="header-anchor">#</a> ä¸º Nginx æ·»åŠ  basic_auth</h2> <div class="language- extra-class"><pre class="language-text"><code>yum install httpd-tools  

htpasswd -c /opt/nginx-auth/passwd.db myusernameï¼Œå›è½¦ä¹‹åè¾“å…¥ä¸¤æ¬¡å¯†ç 


server {
    ...

    location / {
        auth_basic   &quot;please input you user name and password&quot;;
        auth_basic_user_file    /opt/nginx-auth/passwd.db;
        ....
    }
}

</code></pre></div><h2 id="nginx-å…¨å±€å˜é‡"><a href="#nginx-å…¨å±€å˜é‡" class="header-anchor">#</a> Nginx å…¨å±€å˜é‡</h2> <ul><li>$arg_PARAMETER #è¿™ä¸ªå˜é‡åŒ…å«GETè¯·æ±‚ä¸­ï¼Œå¦‚æœæœ‰å˜é‡PARAMETERæ—¶çš„å€¼ã€‚</li> <li>$args #è¿™ä¸ªå˜é‡ç­‰äºè¯·æ±‚è¡Œä¸­(GETè¯·æ±‚)çš„å‚æ•°ï¼Œä¾‹å¦‚foo=123&amp;bar=blahblah;</li> <li>$binary_remote_addr #äºŒè¿›åˆ¶çš„å®¢æˆ·åœ°å€ã€‚</li> <li>$body_bytes_sent #å“åº”æ—¶é€å‡ºçš„bodyå­—èŠ‚æ•°æ•°é‡ã€‚å³ä½¿è¿æ¥ä¸­æ–­ï¼Œè¿™ä¸ªæ•°æ®ä¹Ÿæ˜¯ç²¾ç¡®çš„ã€‚</li> <li>$content_length #è¯·æ±‚å¤´ä¸­çš„Content-lengthå­—æ®µã€‚</li> <li>$content_type #è¯·æ±‚å¤´ä¸­çš„Content-Typeå­—æ®µã€‚</li> <li>$cookie_COOKIE #cookie COOKIEå˜é‡çš„å€¼</li> <li>$document_root #å½“å‰è¯·æ±‚åœ¨rootæŒ‡ä»¤ä¸­æŒ‡å®šçš„å€¼ã€‚</li> <li>$document_uri #ä¸$uriç›¸åŒã€‚</li> <li>$host #è¯·æ±‚ä¸»æœºå¤´å­—æ®µï¼Œå¦åˆ™ä¸ºæœåŠ¡å™¨åç§°ã€‚</li> <li>$hostname #Set to the machineâ€™s hostname as returned by gethostname</li> <li>$http_HEADER</li> <li>$is_args #å¦‚æœæœ‰$argså‚æ•°ï¼Œè¿™ä¸ªå˜é‡ç­‰äºâ€?â€ï¼Œå¦åˆ™ç­‰äºâ€&quot;ï¼Œç©ºå€¼ã€‚</li> <li>$http_user_agent #å®¢æˆ·ç«¯agentä¿¡æ¯</li> <li>$http_cookie #å®¢æˆ·ç«¯cookieä¿¡æ¯</li> <li>$limit_rate #è¿™ä¸ªå˜é‡å¯ä»¥é™åˆ¶è¿æ¥é€Ÿç‡ã€‚</li> <li>$query_string #ä¸$argsç›¸åŒã€‚</li> <li>$request_body_file #å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“ä¿¡æ¯çš„ä¸´æ—¶æ–‡ä»¶åã€‚</li> <li>$request_method #å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ¨ä½œï¼Œé€šå¸¸ä¸ºGETæˆ–POSTã€‚</li> <li>$remote_addr #å®¢æˆ·ç«¯çš„IPåœ°å€ã€‚</li> <li>$remote_port #å®¢æˆ·ç«¯çš„ç«¯å£ã€‚</li> <li>$remote_user #å·²ç»ç»è¿‡Auth Basic ModuleéªŒè¯çš„ç”¨æˆ·åã€‚</li> <li>$request_completion #å¦‚æœè¯·æ±‚ç»“æŸï¼Œè®¾ç½®ä¸ºOK. å½“è¯·æ±‚æœªç»“æŸæˆ–å¦‚æœè¯¥è¯·æ±‚ä¸æ˜¯è¯·æ±‚é“¾ä¸²çš„æœ€åä¸€ä¸ªæ—¶ï¼Œä¸ºç©º(Empty)ã€‚</li> <li>$request_method #GETæˆ–POST</li> <li>$request_filename #å½“å‰è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±rootæˆ–aliasæŒ‡ä»¤ä¸URIè¯·æ±‚ç”Ÿæˆã€‚</li> <li>$request_uri #åŒ…å«è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œå¦‚ï¼šâ€/foo/bar.php?arg=bazâ€ã€‚ä¸èƒ½ä¿®æ”¹ã€‚</li> <li>$scheme #HTTPæ–¹æ³•ï¼ˆå¦‚httpï¼Œhttpsï¼‰ã€‚</li> <li>$server_protocol #è¯·æ±‚ä½¿ç”¨çš„åè®®ï¼Œé€šå¸¸æ˜¯HTTP/1.0æˆ–HTTP/1.1ã€‚</li> <li>$server_addr #æœåŠ¡å™¨åœ°å€ï¼Œåœ¨å®Œæˆä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨åå¯ä»¥ç¡®å®šè¿™ä¸ªå€¼ã€‚</li> <li>$server_name #æœåŠ¡å™¨åç§°ã€‚</li> <li>$server_port #è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨çš„ç«¯å£å·ã€‚</li> <li>$uri #ä¸å¸¦è¯·æ±‚å‚æ•°çš„å½“å‰URIï¼Œ$uriä¸åŒ…å«ä¸»æœºåï¼Œå¦‚â€/foo/bar.htmlâ€ã€‚è¯¥å€¼æœ‰å¯èƒ½å’Œ$request_uri ä¸ä¸€è‡´ã€‚</li> <li>$request_uriæ˜¯æµè§ˆå™¨å‘è¿‡æ¥çš„å€¼ã€‚è¯¥å€¼æ˜¯rewriteåçš„å€¼ã€‚ä¾‹å¦‚åšäº†internal redirectsåã€‚</li></ul> <h2 id="nginx-é…ç½®"><a href="#nginx-é…ç½®" class="header-anchor">#</a> Nginx é…ç½®</h2> <ul><li>Nginx é»˜è®¤é…ç½®æ–‡ä»¶ï¼š<code>vim /usr/local/nginx/conf/nginx.conf</code></li></ul> <h3 id="nginx-åœ¨-1-8-1-ç‰ˆæœ¬ä¸‹çš„é»˜è®¤é…ç½®-å»æ‰æ³¨é‡Š"><a href="#nginx-åœ¨-1-8-1-ç‰ˆæœ¬ä¸‹çš„é»˜è®¤é…ç½®-å»æ‰æ³¨é‡Š" class="header-anchor">#</a> Nginx åœ¨ 1.8.1 ç‰ˆæœ¬ä¸‹çš„é»˜è®¤é…ç½®ï¼ˆå»æ‰æ³¨é‡Šï¼‰</h3> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">user</span> root</span><span class="token punctuation">;</span><span class="token comment">#æˆ‘è¿™é‡Œä¹ æƒ¯ä½¿ç”¨ rootï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è¿™æ ·è®¾ç½®ã€‚å¦‚æœä½ æœ‰ä¸ºä½ çš„ nginx ä¸“é—¨é…ç½®ä¸€ä¸ªç”¨æˆ·ï¼Œè¿™é‡Œéœ€è¦æ”¹ä¸ºä½ çš„ç”¨æˆ·</span>
<span class="token directive"><span class="token keyword">worker_processes</span>  <span class="token number">1</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">1024</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">include</span>       mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span>  application/octet-stream</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">sendfile</span>        <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">keepalive_timeout</span>  <span class="token number">65</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> = /50x.html</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="http-æœåŠ¡-è™šæ‹Ÿä¸»æœº"><a href="#http-æœåŠ¡-è™šæ‹Ÿä¸»æœº" class="header-anchor">#</a> HTTP æœåŠ¡ï¼Œè™šæ‹Ÿä¸»æœº</h3> <ul><li>åœæ­¢é˜²ç«å¢™ï¼š<code>service iptables stop</code>ï¼Œé˜²æ­¢å‡ºç°ç‰¹åˆ«å¹²æ‰°</li> <li>ç¼–è¾‘é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼š<code>vim /usr/local/nginx/conf/nginx.conf</code></li> <li>è®¾ç½®ä¸¤ä¸ªè™šæ‹Ÿä¸»æœºï¼ˆé€šè¿‡<strong>ç«¯å£</strong>æ¥åŒºåˆ†å¼€ï¼‰</li></ul> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">user</span> root</span><span class="token punctuation">;</span><span class="token comment">#æˆ‘è¿™é‡Œä¹ æƒ¯ä½¿ç”¨ rootï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è¿™æ ·è®¾ç½®ã€‚å¦‚æœä½ æœ‰ä¸ºä½ çš„ nginx ä¸“é—¨é…ç½®ä¸€ä¸ªç”¨æˆ·ï¼Œè¿™é‡Œéœ€è¦æ”¹ä¸ºä½ çš„ç”¨æˆ·</span>
<span class="token directive"><span class="token keyword">worker_processes</span>  <span class="token number">1</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">1024</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">include</span>       mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span>  application/octet-stream</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">sendfile</span>        <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">keepalive_timeout</span>  <span class="token number">65</span></span><span class="token punctuation">;</span>

    <span class="token comment"># ä¸€ä¸ª server ä»£è¡¨ä¸€ä¸ªè™šæ‹Ÿä¸»æœº</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token comment"># è™šæ‹Ÿæœºæ ¹ç›®å½•æ˜¯ /usr/local/nginx/html ç›®å½•</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
            <span class="token comment"># è™šæ‹Ÿæœºé¦–é¡µæ˜¯ /usr/local/nginx/html ç›®å½•ä¸‹è¿™ä¸¤ä¸ªæ–‡ä»¶</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> = /50x.html</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token comment"># ç¬¬äºŒä¸ªè™šæ‹Ÿæœºçš„ç«¯å£æ˜¯ 90ï¼ŒæœåŠ¡åœ°å€è¿˜æ˜¯æœ¬åœ°</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">90</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html90</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> = /50x.html</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>è®¾ç½®ä¸¤ä¸ªè™šæ‹Ÿä¸»æœºï¼ˆé€šè¿‡<strong>åŸŸå</strong>æ¥åŒºåˆ†å¼€ï¼‰</li></ul> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">user</span> root</span><span class="token punctuation">;</span><span class="token comment">#æˆ‘è¿™é‡Œä¹ æƒ¯ä½¿ç”¨ rootï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è¿™æ ·è®¾ç½®ã€‚å¦‚æœä½ æœ‰ä¸ºä½ çš„ nginx ä¸“é—¨é…ç½®ä¸€ä¸ªç”¨æˆ·ï¼Œè¿™é‡Œéœ€è¦æ”¹ä¸ºä½ çš„ç”¨æˆ·</span>
<span class="token directive"><span class="token keyword">worker_processes</span>  <span class="token number">1</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">1024</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">include</span>       mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span>  application/octet-stream</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">sendfile</span>        <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">keepalive_timeout</span>  <span class="token number">65</span></span><span class="token punctuation">;</span>

    <span class="token comment"># ä¸€ä¸ª server ä»£è¡¨ä¸€ä¸ªè™šæ‹Ÿä¸»æœº</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token comment"># ä¸¤ä¸ªè™šæ‹Ÿä¸»æœºéƒ½ä½¿ç”¨ 80 ç«¯å£ï¼Œè®¾ç½®ä¸åŒåŸŸå</span>
        <span class="token directive"><span class="token keyword">server_name</span>  code.youmeek.com</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token comment"># è™šæ‹Ÿæœºæ ¹ç›®å½•æ˜¯ /usr/local/nginx/html ç›®å½•</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
            <span class="token comment"># è™šæ‹Ÿæœºé¦–é¡µæ˜¯ /usr/local/nginx/html ç›®å½•ä¸‹è¿™ä¸¤ä¸ªæ–‡ä»¶</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> = /50x.html</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token comment"># ä¸¤ä¸ªè™šæ‹Ÿä¸»æœºéƒ½ä½¿ç”¨ 80 ç«¯å£ï¼Œè®¾ç½®ä¸åŒåŸŸå</span>
        <span class="token directive"><span class="token keyword">server_name</span>  i.youmeek.com</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html-i</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> = /50x.html</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡"><a href="#åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡" class="header-anchor">#</a> åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡</h3> <ul><li><p>æœ€ç²¾ç®€çš„ç¯å¢ƒï¼šä¸€å°è™šæ‹Ÿæœº</p> <ul><li>1 ä¸ª JDK</li> <li>1 ä¸ª Nginx</li> <li>2 ä¸ª Tomcat</li></ul></li> <li><p>Nginx é…ç½®ï¼š</p></li></ul> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">user</span> root</span><span class="token punctuation">;</span><span class="token comment">#æˆ‘è¿™é‡Œä¹ æƒ¯ä½¿ç”¨ rootï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è¿™æ ·è®¾ç½®ã€‚å¦‚æœä½ æœ‰ä¸ºä½ çš„ nginx ä¸“é—¨é…ç½®ä¸€ä¸ªç”¨æˆ·ï¼Œè¿™é‡Œéœ€è¦æ”¹ä¸ºä½ çš„ç”¨æˆ·</span>
<span class="token directive"><span class="token keyword">worker_processes</span>  <span class="token number">1</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">1024</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">include</span>       mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span>  application/octet-stream</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">sendfile</span>        <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">keepalive_timeout</span>  <span class="token number">65</span></span><span class="token punctuation">;</span>

    <span class="token comment"># è‡ªå·±å®šä¹‰çš„ä¸¤ä¸ª tomcat è¯·æ±‚åœ°å€å’Œç«¯å£</span>
    <span class="token comment"># ä¹Ÿå°±æ˜¯å½“æµè§ˆå™¨è¯·æ±‚ï¼štomcat.youmeek.com çš„æ—¶å€™ä»ä¸‹é¢è¿™ä¸¤ä¸ª tomcat ä¸­å»æ‰¾ä¸€ä¸ªè¿›è¡Œè½¬å‘</span>
    <span class="token directive"><span class="token keyword">upstream</span> tomcatCluster</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.1.114:8080</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.1.114:8081</span><span class="token punctuation">;</span>
        
        <span class="token comment"># æ·»åŠ  weight å­—æ®µå¯ä»¥è¡¨ç¤ºæƒé‡ï¼Œå€¼è¶Šé«˜æƒé‡è¶Šå¤§ï¼Œé»˜è®¤å€¼æ˜¯ 1ï¼Œæœ€å¤§å€¼å®˜ç½‘æ²¡è¯´ï¼Œä¸€èˆ¬å¦‚æœè®¾ç½®ä¹Ÿå°±è®¾ç½® 3,5,7 è¿™æ ·çš„æ•°</span>
        <span class="token comment"># å®˜ç½‘ï¼šhttps://www.nginx.com/resources/admin-guide/load-balancer/#weight</span>
        <span class="token comment"># server 192.168.1.114:8080 weight=2;</span>
        <span class="token comment"># server 192.168.1.114:8081 weight=1;</span>
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>  tomcat.youmeek.com</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span>   http://tomcatCluster</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="é…ç½®-https-æœåŠ¡-ssl-è¯ä¹¦é…ç½®"><a href="#é…ç½®-https-æœåŠ¡-ssl-è¯ä¹¦é…ç½®" class="header-anchor">#</a> é…ç½® HTTPS æœåŠ¡ï¼ˆSSL è¯ä¹¦é…ç½®ï¼‰</h3> <ul><li>å…è´¹ç”³è¯· SSL è¯ä¹¦æ¸ é“
<ul><li>æ•™ç¨‹ï¼š<a href="https://www.wn789.com/4394.html" target="_blank" rel="noopener noreferrer">https://www.wn789.com/4394.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>SSL For Freeï¼š<a href="https://www.sslforfree.com" target="_blank" rel="noopener noreferrer">https://www.sslforfree.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>é…ç½®è¦ç‚¹å…¶å®å°±æ˜¯ä¸‹é¢è¯¥å›¾ï¼š</li></ul></li> <li><img src="/Linux_All_in_one/assets/img/Nginx-SSL-a-1.4e60f7c8.jpg" alt="å…è´¹ç”³è¯· SSL è¯ä¹¦æ¸ é“"></li> <li>ä¸€èˆ¬ä½ ä¼šä¸‹è½½ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶ï¼š<code>certificate.crt</code>ï¼Œ<code>private.key</code></li> <li>å¦‚æœä½ éœ€è¦æŠŠ crt å’Œ key çš„è¯ä¹¦è½¬æ¢æˆ keystoreï¼ˆå¦‚æœä½ æœ‰è¿™ä¸ªéœ€æ±‚çš„è¯ï¼‰</li> <li>ä» key å’Œ crt ç”Ÿæˆ pkcs12 æ ¼å¼çš„ keystoreï¼Œç”Ÿæˆè¿‡ç¨‹ä¼šè®©äººä½ è¾“å…¥å¯†ç ï¼Œè¿™ä¸ªå¯†ç ä¸‹é¢ä¼šç”¨åˆ°ï¼Œæˆ‘è¿™é‡Œå‡è®¾è¾“å…¥ 123456
<ul><li><code>openssl pkcs12 -export -in certificate.crt -inkey private.key -out youmeek.p12 -name youmeek -CAfile certificate.crt -caname -chain</code></li> <li><code>keytool -importkeystore -v -srckeystore youmeek.p12 -srcstoretype pkcs12 -srcstorepass 123456 -destkeystore youmeek.keystore -deststoretype jks -deststorepass 123456</code></li></ul></li> <li>ä¿®æ”¹ nginx é…ç½®æ–‡ä»¶ï¼Œå¢åŠ å¯¹ HTTPS æ”¯æŒï¼ˆä¸‹é¢çš„é…ç½®æ˜¯åŸºäºé»˜è®¤å®‰è£… nginx åçš„é…ç½®ï¼‰</li> <li><code>vim /usr/local/nginx/conf/nginx.conf</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>worker_processes  1;
events {
    worker_connections  1024;
}
http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;
    
    # å¦‚æœè®¿é—® http ä¹Ÿç›´æ¥è·³è½¬åˆ° https
    server {
        listen       80;
        server_name sso.youmeek.com;
        return 301 https://$server_name$request_uri;
    }
    
    # crt å’Œ key æ–‡ä»¶çš„å­˜æ”¾ä½ç½®æ ¹æ®ä½ è‡ªå·±å­˜æ”¾ä½ç½®è¿›è¡Œä¿®æ”¹
    server {
        listen       443;
        server_name  sso.youmeek.com;
        ssl  on;
        ssl_certificate     /opt/ssl/certificate.crt;
        ssl_certificate_key /opt/ssl/private.key;
        location / {
            root   html;
            index  index.html index.htm;
        }
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }
}

</code></pre></div><ul><li>æœ€æ–°ç‰ˆæœ¬çš„ Nginx SSL é…ç½®</li></ul> <div class="language- extra-class"><pre class="language-text"><code>listen 443 ssl;

ssl_certificate     /opt/jar/ssl/server.crt;
ssl_certificate_key /opt/jar/ssl/server.key;

ssl_session_timeout 5m;
ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
ssl_prefer_server_ciphers on;
</code></pre></div><hr> <h2 id="nginx-å‹åŠ›æµ‹è¯•"><a href="#nginx-å‹åŠ›æµ‹è¯•" class="header-anchor">#</a> Nginx å‹åŠ›æµ‹è¯•</h2> <ul><li>AB æµ‹è¯•å·¥å…·å®‰è£…ï¼š<code>yum install -y httpd-tools</code></li> <li>ä½¿ç”¨ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>ab -n 1000 -c 100 http://www.baidu.com/

-n  æ€»çš„è¯·æ±‚æ•°
-c  å•ä¸ªæ—¶åˆ»å¹¶å‘æ•°
</code></pre></div><ul><li>å‹æµ‹ç»“æœï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>This is ApacheBench, Version 2.3 &lt;$Revision: 1430300 $&gt;
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking juejin.im (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Completed 1000 requests
Finished 1000 requests


Server Software:        nginx
Server Hostname:        juejin.im
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-RSA-AES256-GCM-SHA384,2048,256

Document Path:          /
Document Length:        271405 bytes

Concurrency Level:      100ï¼ˆå¹¶å‘æ•°ï¼š100ï¼‰
Time taken for tests:   120.042 secondsï¼ˆä¸€å…±ç”¨äº† 120 ç§’ï¼‰
Complete requests:      1000ï¼ˆæ€»çš„è¯·æ±‚æ•°ï¼š1000ï¼‰
Failed requests:        0ï¼ˆå¤±è´¥çš„è¯·æ±‚æ¬¡æ•°ï¼‰
Write errors:           0
Total transferred:      271948000 bytes
HTML transferred:       271405000 bytes
Requests per second:    8.33 [#/sec] (mean)ï¼ˆQPS ç³»ç»Ÿååé‡ï¼Œå¹³å‡æ¯ç§’è¯·æ±‚æ•°ï¼Œè®¡ç®—å…¬å¼ = æ€»è¯·æ±‚æ•° / æ€»æ—¶é—´æ•°ï¼‰
Time per request:       12004.215 [ms] (mean)ï¼ˆæ¯«ç§’ï¼Œå¹³å‡æ¯æ¬¡å¹¶å‘ 100 ä¸ªè¯·æ±‚çš„å¤„ç†æ—¶é—´ï¼‰
Time per request:       120.042 [ms] (mean, across all concurrent requests)ï¼ˆæ¯«ç§’ï¼Œå¹¶å‘ 100 ä¸‹ï¼Œå¹³å‡æ¯ä¸ªè¯·æ±‚å¤„ç†æ—¶é—´ï¼‰
Transfer rate:          2212.34 [Kbytes/sec] receivedï¼ˆå¹³å‡æ¯ç§’ç½‘ç»œæµé‡ï¼‰

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       57  159 253.6     77    1002
Processing:  1139 11570 2348.2  11199   36198
Waiting:      156 1398 959.4   1279   22698
Total:       1232 11730 2374.1  11300   36274

Percentage of the requests served within a certain time (ms)
  50%  11300
  66%  11562
  75%  11863
  80%  12159
  90%  13148
  95%  15814
  98%  18882
  99%  22255
 100%  36274 (longest request)
</code></pre></div><hr> <h2 id="nginx-å¸¸è§„ä¼˜åŒ–"><a href="#nginx-å¸¸è§„ä¼˜åŒ–" class="header-anchor">#</a> Nginx å¸¸è§„ä¼˜åŒ–</h2> <h4 id="å¢åŠ å·¥ä½œçº¿ç¨‹æ•°å’Œå¹¶å‘è¿æ¥æ•°"><a href="#å¢åŠ å·¥ä½œçº¿ç¨‹æ•°å’Œå¹¶å‘è¿æ¥æ•°" class="header-anchor">#</a> å¢åŠ å·¥ä½œçº¿ç¨‹æ•°å’Œå¹¶å‘è¿æ¥æ•°</h4> <ul><li>ä¿®æ”¹å‚æ•°ï¼š<code>worker_processes 1;</code></li> <li>è¯¥å‚æ•°æ˜¯æŒ‡ï¼šnginx è¦å¼€å¯çš„å·¥ä½œè¿›ç¨‹æ•°ï¼ˆworker processï¼‰ï¼Œé»˜è®¤æ˜¯ 1ï¼Œä¸€æŠŠä½ ä¸éœ€è¦ä¿®æ”¹ã€‚ï¼ˆé™¤äº†å·¥ä½œè¿›ç¨‹ï¼Œè¿˜æœ‰ä¸€ç§ master process çš„æ¦‚å¿µï¼‰</li> <li>ä½†æ˜¯å¦‚æœè¯·æ±‚æ•°æ¯”è¾ƒå¤šï¼Œä¸€èˆ¬æ¨èæœ€å¤§æ˜¯ä¿®æ”¹æˆ CPU çš„å†…æ ¸æ•°ç­‰åŒçš„å€¼ï¼Œä»¥å¢åŠ èƒ½åŠ›ã€‚</li> <li>ä¿®æ”¹ events å‚æ•°</li></ul> <div class="language- extra-class"><pre class="language-text"><code>events {
	# æ¯ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§è¿æ¥æ•°ï¼ˆè¿™ä¸ªå‚æ•°æ˜¯å—é™åˆ¶äºç³»ç»Ÿå‚æ•°çš„ï¼Œé»˜è®¤æ˜¯ 1024ï¼‰ï¼ˆè¿›ç¨‹æ•°æ˜¯ä¸Šé¢ worker_processes å†³å®šçš„ï¼‰
    worker_connections  1024;
    # å¯ä»¥ä¸€æ¬¡å»ºç«‹å¤šä¸ªè¿æ¥
    multi_accept on;
    # epoll æ¨¡å¼æ•ˆç‡æœ€é«˜
    use epoll;
}
</code></pre></div><h4 id="å¯åŠ¨é•¿è¿æ¥"><a href="#å¯åŠ¨é•¿è¿æ¥" class="header-anchor">#</a> å¯åŠ¨é•¿è¿æ¥</h4> <div class="language- extra-class"><pre class="language-text"><code>http {
  sendfile on; # å‡å°‘æ–‡ä»¶åœ¨åº”ç”¨å’Œå†…æ ¸ä¹‹é—´çš„æ‹·è´
  tcp_nopush on; # å½“æ•°æ®åŒ…è¾¾åˆ°ä¸€å®šå¤§å°å†å‘é€
  
  keepalive_timeout   65;
  
  upstream tomcatCluster {
      server 192.168.1.114:8080;
      server 192.168.1.114:8081;
      keepalive 300; # 300 ä¸ªé•¿è¿æ¥
  }
  
}
</code></pre></div><h4 id="å¯ç”¨ç¼“å­˜å’Œå‹ç¼©"><a href="#å¯ç”¨ç¼“å­˜å’Œå‹ç¼©" class="header-anchor">#</a> å¯ç”¨ç¼“å­˜å’Œå‹ç¼©</h4> <div class="language- extra-class"><pre class="language-text"><code>http {
    gzip on;
    gzip_buffers 8 16k; # è¿™ä¸ªé™åˆ¶äº†nginxä¸èƒ½å‹ç¼©å¤§äº128kçš„æ–‡ä»¶
    gzip_min_length 512; # å•ä½byte
    gzip_disable &quot;MSIE [1-6]\.(?!.*SV1)&quot;;
    gzip_http_version 1.1; # 1.0 çš„ç‰ˆæœ¬å¯èƒ½ä¼šæœ‰é—®é¢˜
    gzip_types   text/plain text/css application/javascript application/x-javascript application/json application/xml;
}
</code></pre></div><h4 id="æ“ä½œç³»ç»Ÿä¼˜åŒ–-æœºå™¨å¥½ç‚¹çš„æ—¶å€™"><a href="#æ“ä½œç³»ç»Ÿä¼˜åŒ–-æœºå™¨å¥½ç‚¹çš„æ—¶å€™" class="header-anchor">#</a> æ“ä½œç³»ç»Ÿä¼˜åŒ–ï¼ˆæœºå™¨å¥½ç‚¹çš„æ—¶å€™ï¼‰</h4> <h6 id="ä¿®æ”¹-sysctl-å‚æ•°"><a href="#ä¿®æ”¹-sysctl-å‚æ•°" class="header-anchor">#</a> ä¿®æ”¹ sysctl å‚æ•°</h6> <ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/sysctl.conf</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>net.ipv4.tcp_fin_timeout = 10           #ä¿æŒåœ¨FIN-WAIT-2çŠ¶æ€çš„æ—¶é—´ï¼Œä½¿ç³»ç»Ÿå¯ä»¥å¤„ç†æ›´å¤šçš„è¿æ¥ã€‚æ­¤å‚æ•°å€¼ä¸ºæ•´æ•°ï¼Œå•ä½ä¸ºç§’ã€‚
net.ipv4.tcp_tw_reuse = 1              #å¼€å¯é‡ç”¨ï¼Œå…è®¸å°†TIME_WAIT socketç”¨äºæ–°çš„TCPè¿æ¥ã€‚é»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ã€‚
net.ipv4.tcp_tw_recycle = 0            #å¼€å¯TCPè¿æ¥ä¸­TIME_WAIT socketçš„å¿«é€Ÿå›æ”¶ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ã€‚
net.ipv4.tcp_syncookies = 1            #å¼€å¯SYN cookieï¼Œå‡ºç°SYNç­‰å¾…é˜Ÿåˆ—æº¢å‡ºæ—¶å¯ç”¨cookieå¤„ç†ï¼Œé˜²èŒƒå°‘é‡çš„SYNæ”»å‡»ã€‚é»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ã€‚
net.core.somaxconn = 1024             #å®šä¹‰äº†ç³»ç»Ÿä¸­æ¯ä¸€ä¸ªç«¯å£æœ€å¤§çš„ç›‘å¬é˜Ÿåˆ—çš„é•¿åº¦, å¯¹äºä¸€ä¸ªç»å¸¸å¤„ç†æ–°è¿æ¥çš„é«˜è´Ÿè½½ webæœåŠ¡ç¯å¢ƒæ¥è¯´ï¼Œé»˜è®¤å€¼ä¸º128ï¼Œåå°ã€‚
</code></pre></div><ul><li>åˆ·æ–° sysctl é…ç½®ï¼š<code>sysctl -p</code></li></ul> <h6 id="ä¿®æ”¹-limits-å‚æ•°"><a href="#ä¿®æ”¹-limits-å‚æ•°" class="header-anchor">#</a> ä¿®æ”¹ limits å‚æ•°</h6> <ul><li>ElasticSearch ä¸€èˆ¬ä¹Ÿæ˜¯è¦ä¿®æ”¹è¯¥å‚æ•°</li> <li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/security/limits.conf</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>* soft nofile 262144
* hard nofile 262144
* soft core unlimited
* soft stack 262144
</code></pre></div><hr> <h2 id="nginx-ç›‘æ§æ¨¡å—"><a href="#nginx-ç›‘æ§æ¨¡å—" class="header-anchor">#</a> Nginx ç›‘æ§æ¨¡å—</h2> <ul><li>å¦‚æœä½ éœ€è¦ç›‘æ§ nginx æƒ…å†µå¯ä»¥å®‰è£…çš„åŠ å…¥è¿™ä¸ªæ¨¡å— http_stub_status_moduleï¼š</li></ul> <div class="language-ini extra-class"><pre class="language-ini"><code>./configure \
<span class="token key attr-name">--prefix</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/nginx \</span>
<span class="token key attr-name">--pid-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/local/nginx/nginx.pid \</span>
<span class="token key attr-name">--lock-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/lock/nginx/nginx.lock \</span>
<span class="token key attr-name">--error-log-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/log/nginx/error.log \</span>
<span class="token key attr-name">--http-log-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/log/nginx/access.log \</span>
--with-http_gzip_static_module \
<span class="token key attr-name">--http-client-body-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/client \</span>
<span class="token key attr-name">--http-proxy-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/proxy \</span>
<span class="token key attr-name">--http-fastcgi-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/fastcgi \</span>
<span class="token key attr-name">--http-uwsgi-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/uwsgi \</span>
--with-http_ssl_module \
<span class="token key attr-name">--http-scgi-temp-path</span><span class="token punctuation">=</span><span class="token value attr-value">/var/temp/nginx/scgi \</span>
--with-http_stub_status_module
</code></pre></div><ul><li>ç„¶ååœ¨ nginx.conf æ–‡ä»¶çš„ location åŒºåŸŸå¢åŠ ï¼šstub_status on;</li></ul> <div class="language-ini extra-class"><pre class="language-ini"><code>location /nginx_status {
    allow 127.0.0.1;
    deny all;
    stub_status on;
    access_log   off;
}
</code></pre></div><ul><li>å½“ä½ è®¿é—®ï¼šhttp://127.0.0.1/nginx_statusï¼Œä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„ç»“æœ</li> <li>å…¶ä¸­é…ç½®çš„ <code>allow 127.0.0.1;</code> è¡¨ç¤ºåªå…è®¸æœ¬æœºè®¿é—®ï¼šhttp://127.0.0.1/nginx_status æ‰èƒ½çœ‹åˆ°
<ul><li>æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ curl è®¿é—®æœ¬æœºçœ‹åˆ°ç»“æœï¼Œä¸ä¸€å®šè¦å¯¹å¤–å¼€æ”¾ã€‚</li></ul></li> <li><code>deny all;</code> é™¤äº†è¢«å…è®¸çš„ï¼Œå…¶ä»–æ‰€æœ‰äººéƒ½ä¸å¯ä»¥è®¿é—®</li></ul> <div class="language- extra-class"><pre class="language-text"><code>Active connections: 1
server accepts handled requests
 3 6 9   
Reading: 0 Writing: 5 Waiting: 0   
</code></pre></div><ul><li>Active connections: å½“å‰æ´»åŠ¨è¿æ¥æ•°ï¼ŒåŒ…å« waiting çš„è¿æ¥ï¼ˆæœ€å¸¸éœ€è¦çœ‹çš„å°±æ˜¯è¿™ä¸ªå‚æ•°ï¼‰</li> <li>Server accepts handled requests: Nginxæ€»å…±å¤„ç†äº† 3 ä¸ªè¿æ¥,æˆåŠŸåˆ›å»º 6 æ¬¡æ¡æ‰‹(è¯æ˜ä¸­é—´æ²¡æœ‰å¤±è´¥çš„),æ€»å…±å¤„ç†äº† 9 ä¸ªè¯·æ±‚.</li> <li>Reading: Nginx è¯»å–åˆ°å®¢æˆ·ç«¯çš„ Header ä¿¡æ¯æ•°ï¼Œå¦‚æœå¾ˆå¤§ï¼Œè¯´æ˜ç°åœ¨å¾ˆå¤šè¯·æ±‚æ­£åœ¨è¿‡æ¥</li> <li>Writing: Nginx è¿”å›ç»™å®¢æˆ·ç«¯çš„ Header ä¿¡æ¯æ•°ï¼Œå¦‚æœå¾ˆå¤§ï¼Œè¯´æ˜ç°åœ¨åˆå¾ˆå¤šè¯·æ±‚æ­£åœ¨å“åº”</li> <li>Waiting: å¼€å¯keep-aliveçš„æƒ…å†µä¸‹,è¿™ä¸ªå€¼ç­‰äº active â€“ (reading + writing),æ„æ€å°±æ˜¯ Nginx å·²ç»å¤„ç†å®Œæˆ,æ­£åœ¨ç­‰å€™ä¸‹ä¸€æ¬¡è¯·æ±‚æŒ‡ä»¤çš„é©»ç•™è¿æ¥.</li> <li>æ‰€ä»¥,åœ¨è®¿é—®æ•ˆç‡é«˜,è¯·æ±‚å¾ˆå¿«è¢«å¤„ç†å®Œæ¯•çš„æƒ…å†µä¸‹,Waitingæ•°æ¯”è¾ƒå¤šæ˜¯æ­£å¸¸çš„ã€‚<strong>å¦‚æœreading + writingæ•°è¾ƒå¤š,åˆ™è¯´æ˜å¹¶å‘è®¿é—®é‡éå¸¸å¤§,æ­£åœ¨å¤„ç†è¿‡ç¨‹ä¸­</strong></li></ul> <h2 id="nginx-é…ç½®æ–‡ä»¶å¸¸ç”¨é…ç½®ç§¯ç´¯"><a href="#nginx-é…ç½®æ–‡ä»¶å¸¸ç”¨é…ç½®ç§¯ç´¯" class="header-anchor">#</a> Nginx é…ç½®æ–‡ä»¶å¸¸ç”¨é…ç½®ç§¯ç´¯</h2> <h3 id="location-é…ç½®"><a href="#location-é…ç½®" class="header-anchor">#</a> location é…ç½®</h3> <div class="language-nginx extra-class"><pre class="language-nginx"><code>= å¼€å¤´è¡¨ç¤ºç²¾ç¡®åŒ¹é…
^~ å¼€å¤´è¡¨ç¤ºuriä»¥æŸä¸ªå¸¸è§„å­—ç¬¦ä¸²å¼€å¤´ï¼Œä¸æ˜¯æ­£åˆ™åŒ¹é…
~ å¼€å¤´è¡¨ç¤ºåŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…<span class="token punctuation">;</span>
~* å¼€å¤´è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…
/ é€šç”¨åŒ¹é…, å¦‚æœæ²¡æœ‰å…¶å®ƒåŒ¹é…,ä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°

<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> /user</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> = /user</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> /user/</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ^~ /user/</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> /user/youmeek</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ~ /user/youmeek</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ~ ^(/cas/|/casclient1/|/casclient2/|/casclient3/)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ~ .*\.(gif|jpg|jpeg|png|bmp|swf|ico|woff|woff2|ttf|eot|txt)$</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ~ .*$</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="é“¾æ¥-aa-ä¸‹-æŸ¥è¯¢å‚æ•°åŒ…å«-bb"><a href="#é“¾æ¥-aa-ä¸‹-æŸ¥è¯¢å‚æ•°åŒ…å«-bb" class="header-anchor">#</a> é“¾æ¥ aa ä¸‹ï¼ŒæŸ¥è¯¢å‚æ•°åŒ…å« bb</h3> <ul><li>è¿™é‡Œå¿…é¡»ä½¿ç”¨ï¼šIFï¼Œä½†æ˜¯ IF æ˜¯ä¸è¢«æ¨èçš„ï¼š<a href="https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/" target="_blank" rel="noopener noreferrer">If Is Evil<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language- extra-class"><pre class="language-text"><code>location /aa/ {
	if ( $args ~* '(.*bb.*)' ) {
		return 601;
	}
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>location /aa/ {
	if ($args ~ tag=bb){
		return 601;
	}
}
</code></pre></div><hr> <h3 id="http-æœåŠ¡-ç»‘å®šå¤šä¸ªåŸŸå"><a href="#http-æœåŠ¡-ç»‘å®šå¤šä¸ªåŸŸå" class="header-anchor">#</a> HTTP æœåŠ¡ï¼Œç»‘å®šå¤šä¸ªåŸŸå</h3> <ul><li><a href="https://www.ttlsa.com/nginx/use-nginx-proxy/" target="_blank" rel="noopener noreferrer">https://www.ttlsa.com/nginx/use-nginx-proxy/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—"><a href="#å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—" class="header-anchor">#</a> å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—</h3> <h3 id="ç”Ÿæˆè§„æ ¼å›¾"><a href="#ç”Ÿæˆè§„æ ¼å›¾" class="header-anchor">#</a> ç”Ÿæˆè§„æ ¼å›¾</h3> <h3 id="å¯ç”¨-gzip-å‹ç¼©"><a href="#å¯ç”¨-gzip-å‹ç¼©" class="header-anchor">#</a> å¯ç”¨ Gzip å‹ç¼©</h3> <h3 id="é˜²ç›—é“¾"><a href="#é˜²ç›—é“¾" class="header-anchor">#</a> é˜²ç›—é“¾</h3> <ul><li><a href="https://help.aliyun.com/knowledge_detail/5974693.html?spm=5176.788314853.2.18.s4z1ra" target="_blank" rel="noopener noreferrer">https://help.aliyun.com/knowledge_detail/5974693.html?spm=5176.788314853.2.18.s4z1ra<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="nginx-ç¦æ­¢ç‰¹å®šç”¨æˆ·ä»£ç†-user-agents-è®¿é—®-é™æ­¢æŒ‡å®š-ip-è®¿é—®"><a href="#nginx-ç¦æ­¢ç‰¹å®šç”¨æˆ·ä»£ç†-user-agents-è®¿é—®-é™æ­¢æŒ‡å®š-ip-è®¿é—®" class="header-anchor">#</a> Nginx ç¦æ­¢ç‰¹å®šç”¨æˆ·ä»£ç†ï¼ˆUser Agentsï¼‰è®¿é—®ï¼Œé™æ­¢æŒ‡å®š IP è®¿é—®</h3> <ul><li><a href="https://www.ttlsa.com/nginx/how-to-block-user-agents-using-nginx/" target="_blank" rel="noopener noreferrer">https://www.ttlsa.com/nginx/how-to-block-user-agents-using-nginx/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://help.aliyun.com/knowledge_detail/5974693.html?spm=5176.788314853.2.18.s4z1ra" target="_blank" rel="noopener noreferrer">https://help.aliyun.com/knowledge_detail/5974693.html?spm=5176.788314853.2.18.s4z1ra<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>&lt;&gt;</li> <li>&lt;&gt;</li> <li>&lt;&gt;</li></ul> <h3 id="nginx-ç¼“å­˜"><a href="#nginx-ç¼“å­˜" class="header-anchor">#</a> Nginx ç¼“å­˜</h3> <h3 id="nginx-è‡ªåŠ¨åˆ†å‰²æ—¥å¿—æ–‡ä»¶"><a href="#nginx-è‡ªåŠ¨åˆ†å‰²æ—¥å¿—æ–‡ä»¶" class="header-anchor">#</a> Nginx è‡ªåŠ¨åˆ†å‰²æ—¥å¿—æ–‡ä»¶</h3> <ul><li>åœ¨ <a href="/Linux_All_in_one/linux/soft/Nginx&amp;Tomcat/Tomcat-Install-And-Settings.html">Tomcat å®‰è£…å’Œé…ç½®ã€ä¼˜åŒ–</a> æ–‡ç« å·²ç»ä½¿ç”¨äº† cronologï¼Œè¿™é‡Œä¹Ÿå€Ÿç”¨ cronolog æ¥å®ç°åˆ†å‰²ã€‚å…·ä½“å®‰è£…çœ‹æ–‡ç« ã€‚</li> <li>åˆ›å»ºç›®å½•ï¼š<code>mkdir -p /data/nginx/log/logs</code></li> <li>åˆ›å»ºå‘½åç®¡é“ï¼š<code>mkfifo /data/nginx/log/access_log.log</code></li> <li>é…ç½® cronologï¼ˆæŒ‰å¤©ï¼‰ï¼š<code>nohup cat /data/nginx/log/access_log.log | /usr/sbin/cronolog /data/nginx/log/logs/access-%Y-%m-%d.log &amp;</code></li> <li>é…ç½® cronologï¼ˆæŒ‰æœˆï¼‰ï¼š<code>nohup cat /data/nginx/log/access_log.log | /usr/sbin/cronolog /data/nginx/log/logs/access-%Y-%m.log &amp;</code></li> <li>ç¼–è¾‘ nginx é…ç½®æ–‡ä»¶ï¼Œé…ç½® log ä½ç½®ï¼š<code>access_log /data/nginx/log/access_log.log;</code></li> <li>é‡å¯ nginxï¼Œæœ€ç»ˆå¯ä»¥åœ¨ /data/nginx/log/logs ç›®å½•ä¸‹çœ‹åˆ°ç”Ÿæˆçš„ log</li></ul> <h3 id="nginx-å¤„ç†è·¨åŸŸè¯·æ±‚"><a href="#nginx-å¤„ç†è·¨åŸŸè¯·æ±‚" class="header-anchor">#</a> Nginx å¤„ç†è·¨åŸŸè¯·æ±‚</h3> <h3 id="å®‰å…¨ç›¸é¢„é˜²"><a href="#å®‰å…¨ç›¸é¢„é˜²" class="header-anchor">#</a> å®‰å…¨ç›¸é¢„é˜²</h3> <p>åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®è‡ªå®šä¹‰ç¼“å­˜ä»¥é™åˆ¶ç¼“å†²åŒºæº¢å‡ºæ”»å‡»çš„å¯èƒ½æ€§
client_body_buffer_size 1K;
client_header_buffer_size 1k;
client_max_body_size 1k;
large_client_header_buffers 2 1k;</p> <ol start="7"><li><p>å°†timeoutè®¾ä½æ¥é˜²æ­¢DOSæ”»å‡»
æ‰€æœ‰è¿™äº›å£°æ˜éƒ½å¯ä»¥æ”¾åˆ°ä¸»é…ç½®æ–‡ä»¶ä¸­ã€‚
client_body_timeout 10;
client_header_timeout 10;
keepalive_timeout 5 5;
send_timeout 10;</p></li> <li><p>é™åˆ¶ç”¨æˆ·è¿æ¥æ•°æ¥é¢„é˜²DOSæ”»å‡»
limit_zone slimits $binary_remote_addr 5m;
limit_conn slimits 5;</p></li></ol> <h2 id="ä½¿ç”¨-logrotate-åš-nginx-æ—¥å¿—è½®è¯¢åˆ†å‰²"><a href="#ä½¿ç”¨-logrotate-åš-nginx-æ—¥å¿—è½®è¯¢åˆ†å‰²" class="header-anchor">#</a> ä½¿ç”¨ logrotate åš nginx æ—¥å¿—è½®è¯¢åˆ†å‰²</h2> <ul><li><p>å‰æï¼š</p> <ul><li>æˆ‘ nginx çš„æˆåŠŸæ—¥å¿—è·¯å¾„ï¼š/var/log/nginx/access.log</li> <li>æˆ‘ nginx çš„é”™è¯¯æ—¥å¿—è·¯å¾„ï¼š/var/log/nginx/error.log</li> <li>pid è·¯å¾„ï¼š/var/local/nginx/nginx.pid</li></ul></li> <li><p>ä¸€èˆ¬æƒ…å†µ CentOS æ˜¯è£…æœ‰ï¼šlogrotateï¼Œä½ å¯ä»¥æ£€æŸ¥ä¸‹ï¼š<code>rpm -ql logrotate</code>ï¼Œå¦‚æœæœ‰ç›¸åº”ç»“æœï¼Œåˆ™è¡¨ç¤ºä½ ä¹Ÿè£…äº†ã€‚</p></li> <li><p>logrotate é…ç½®æ–‡ä»¶ä¸€èˆ¬åœ¨ï¼š</p> <ul><li>å…¨å±€é…ç½®ï¼š/etc/logrotate.conf é€šç”¨é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å®šä¹‰å…¨å±€é»˜è®¤ä½¿ç”¨çš„é€‰é¡¹ã€‚</li> <li>è‡ªå®šä¹‰é…ç½®ï¼Œæ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹çš„éƒ½ç®—æ˜¯ï¼š/etc/logrotate.d/</li></ul></li> <li><p>é’ˆå¯¹ nginx åˆ›å»ºè‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/logrotate.d/nginx</code></p></li> <li><p>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p></li></ul> <div class="language-ini extra-class"><pre class="language-ini"><code>
/var/log/nginx/access.log /var/log/nginx/error.log {
	create 644 root root
	notifempty
	daily
	rotate 15
	missingok
	dateext
	sharedscripts
	postrotate
	    if [ -f /var/local/nginx/nginx.pid ]; then
	        kill -USR1 `cat /var/local/nginx/nginx.pid`
	    fi
	endscript
}

</code></pre></div><ul><li><p>/var/log/nginx/access.log /var/log/nginx/error.logï¼šå¤šä¸ªæ–‡ä»¶ç”¨ç©ºæ ¼éš”å¼€ï¼Œä¹Ÿå¯ä»¥ç”¨åŒ¹é…ç¬¦ï¼š/var/log/nginx/*.log</p></li> <li><p>notifemptyï¼šå¦‚æœæ˜¯ç©ºæ–‡ä»¶çš„è¯ï¼Œä¸è½¬å‚¨</p></li> <li><p>create 644 root rootï¼šcreate mode owner group è½¬å‚¨æ–‡ä»¶ï¼Œä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶æ¨¡å¼åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶</p></li> <li><p>è°ƒç”¨é¢‘ç‡ï¼Œæœ‰ï¼šdailyï¼Œweeklyï¼Œmonthlyå¯é€‰</p></li> <li><p>rotate 15ï¼šä¸€æ¬¡å°†å­˜å‚¨15ä¸ªå½’æ¡£æ—¥å¿—ã€‚å¯¹äºç¬¬16ä¸ªå½’æ¡£ï¼Œæ—¶é—´æœ€ä¹…çš„å½’æ¡£å°†è¢«åˆ é™¤ã€‚</p></li> <li><p>sharedscriptsï¼šæ‰€æœ‰çš„æ—¥å¿—æ–‡ä»¶éƒ½è½®è½¬å®Œæ¯•åç»Ÿä¸€æ‰§è¡Œä¸€æ¬¡è„šæœ¬</p></li> <li><p>missingokï¼šå¦‚æœæ—¥å¿—æ–‡ä»¶ä¸¢å¤±ï¼Œä¸æŠ¥é”™ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª</p></li> <li><p>dateextï¼šæ–‡ä»¶åç¼€æ˜¯æ—¥æœŸæ ¼å¼,ä¹Ÿå°±æ˜¯åˆ‡å‰²åæ–‡ä»¶æ˜¯:xxx.log-20131216.gz è¿™æ ·,å¦‚æœæ³¨é‡Šæ‰,åˆ‡å‰²å‡ºæ¥æ˜¯æŒ‰æ•°å­—é€’å¢,å³å‰é¢è¯´çš„ xxx.log-1 è¿™ç§æ ¼å¼</p></li> <li><p>postrotateï¼šæ‰§è¡Œå‘½ä»¤çš„å¼€å§‹æ ‡å¿—</p></li> <li><p>endscripthttp:æ‰§è¡Œå‘½ä»¤çš„ç»“æŸæ ‡å¿—</p></li> <li><p>if åˆ¤æ–­çš„æ„æ€ä¸æ˜¯ä¸­æ­¢Nginxçš„è¿›ç¨‹ï¼Œè€Œæ˜¯ä¼ é€’ç»™å®ƒä¿¡å·é‡æ–°ç”Ÿæˆæ—¥å¿—ï¼Œå¦‚æœnginxæ²¡å¯åŠ¨ä¸åšæ“ä½œ</p></li> <li><p>æ›´å¤šå‚æ•°å¯ä»¥çœ‹ï¼š<a href="http://www.cnblogs.com/zengkefu/p/5498324.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/zengkefu/p/5498324.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>æ‰‹åŠ¨æ‰§è¡Œæµ‹è¯•ï¼š<code>/usr/sbin/logrotate -vf /etc/logrotate.d/nginx</code></p></li> <li><p>å‚æ•°ï¼šâ€˜-fâ€™é€‰é¡¹æ¥å¼ºåˆ¶logrotateè½®å¾ªæ—¥å¿—æ–‡ä»¶ï¼Œâ€˜-vâ€™å‚æ•°æä¾›äº†è¯¦ç»†çš„è¾“å‡ºã€‚</p></li> <li><p>éªŒè¯æ˜¯å¦æ‰‹åŠ¨æ‰§è¡ŒæˆåŠŸï¼ŒæŸ¥çœ‹ cron çš„æ—¥å¿—å³å¯ï¼š<code>grep logrotate /var/log/cron</code></p></li> <li><p>è®¾ç½® crontab å®šæ—¶ä»»åŠ¡ï¼š<code>vim /etc/crontab</code>ï¼Œæ·»åŠ ä¸‹é¢å†…å®¹ï¼š</p></li></ul> <div class="language-ini extra-class"><pre class="language-ini"><code>//æ¯å¤©02ç‚¹10åˆ†æ‰§è¡Œä¸€æ¬¡
10 02 * * *  /usr/sbin/logrotate -f /etc/logrotate.d/nginx
</code></pre></div><h3 id="æ‚ä¸ƒæ‚å…«"><a href="#æ‚ä¸ƒæ‚å…«" class="header-anchor">#</a> æ‚ä¸ƒæ‚å…«</h3> <ul><li><a href="https://www.ttlsa.com/nginx/nginx-modules-ngx_set_cconv/" target="_blank" rel="noopener noreferrer">nginxå®ç°ç®€ä½“ç¹ä½“å­—äº’è½¬ä»¥åŠä¸­æ–‡è½¬æ‹¼éŸ³<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.ttlsa.com/nginx/nginx-modules-ngx_http_log_request_speed/" target="_blank" rel="noopener noreferrer">nginxè®°å½•åˆ†æç½‘ç«™å“åº”æ…¢çš„è¯·æ±‚(ngx_http_log_request_speed)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.ttlsa.com/nginx/nginx-modules-empty_gif/" target="_blank" rel="noopener noreferrer">nginxç©ºç™½å›¾ç‰‡(empty_gifæ¨¡å—)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="header-anchor">#</a> èµ„æ–™</h2> <ul><li><a href="https://help.aliyun.com/knowledge_detail/5974693.html?spm=5176.788314853.2.18.s4z1ra" target="_blank" rel="noopener noreferrer">https://help.aliyun.com/knowledge_detail/5974693.html?spm=5176.788314853.2.18.s4z1ra<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.ydcss.com/archives/466" target="_blank" rel="noopener noreferrer">http://www.ydcss.com/archives/466<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://blog.sae.sina.com.cn/archives/2107" target="_blank" rel="noopener noreferrer">http://blog.sae.sina.com.cn/archives/2107<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.nginx.cn/273.html" target="_blank" rel="noopener noreferrer">http://www.nginx.cn/273.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://printfabcd.iteye.com/blog/1200382" target="_blank" rel="noopener noreferrer">http://printfabcd.iteye.com/blog/1200382<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/adminlove520/Linux_All_in_one/edit/main/docs/linux/soft/Nginx&amp;Tomcat/Nginx-Install-And-Settings.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">3 hours ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/Linux_All_in_one/assets/js/app.4a61619a.js" defer></script><script src="/Linux_All_in_one/assets/js/2.ee3c5eb7.js" defer></script><script src="/Linux_All_in_one/assets/js/1.bc260717.js" defer></script><script src="/Linux_All_in_one/assets/js/28.f1611369.js" defer></script><script src="/Linux_All_in_one/assets/js/21.f8578145.js" defer></script>
  </body>
</html>
