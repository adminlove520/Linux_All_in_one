(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{386:function(s,t,a){"use strict";a.r(t);var e=a(9),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[s._v("#")]),s._v(" Docker Compose")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://github.com/docker/compose",target:"_blank",rel:"noopener noreferrer"}},[s._v("compose"),t("OutboundLink")],1),s._v(" é¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹ Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚ä»åŠŸèƒ½ä¸Šçœ‹ï¼Œè·Ÿ "),t("code",[s._v("OpenStack")]),s._v(" ä¸­çš„ "),t("code",[s._v("Heat")]),s._v(" ååˆ†ç±»ä¼¼ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"ä¸€ã€compose-ç®€ä»‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€compose-ç®€ä»‹"}},[s._v("#")]),s._v(" ä¸€ã€Compose ç®€ä»‹")]),s._v(" "),t("p",[t("strong",[t("code",[s._v("Compose")]),s._v(" çš„å®šä½æ˜¯ï¼šå®šä¹‰å’Œè¿è¡Œå¤šä¸ª Docker å®¹å™¨çš„åº”ç”¨")]),s._v("ã€‚ ä½¿ç”¨ä¸€ä¸ª "),t("code",[s._v("Dockerfile")]),s._v(" æ¨¡æ¿æ–‡ä»¶ï¼Œå¯ä»¥è®©ç”¨æˆ·å¾ˆæ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ã€‚ç„¶è€Œï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µã€‚ä¾‹å¦‚è¦å®ç°ä¸€ä¸ª Web é¡¹ç›®ï¼Œé™¤äº† Web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼Œç”šè‡³è¿˜åŒ…æ‹¬è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ã€‚")]),s._v(" "),t("p",[t("code",[s._v("Compose")]),s._v(" æ°å¥½æ»¡è¶³äº†è¿™æ ·çš„éœ€æ±‚ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ "),t("code",[s._v("docker-compose.yml")]),s._v(" æ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ã€‚")]),s._v(" "),t("p",[t("code",[s._v("Compose")]),s._v(" ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æœåŠ¡ ("),t("code",[s._v("service")]),s._v(")")]),s._v("ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("é¡¹ç›® ("),t("code",[s._v("project")]),s._v(")")]),s._v("ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ "),t("code",[s._v("docker-compose.yml")]),s._v(" æ–‡ä»¶ä¸­å®šä¹‰ã€‚")])]),s._v(" "),t("p",[t("code",[s._v("Compose")]),s._v(" çš„é»˜è®¤ç®¡ç†å¯¹è±¡æ˜¯é¡¹ç›®ï¼Œé€šè¿‡å­å‘½ä»¤å¯¹é¡¹ç›®ä¸­çš„ä¸€ç»„å®¹å™¨è¿›è¡Œä¾¿æ·åœ°ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚")]),s._v(" "),t("h2",{attrs:{id:"äºŒã€å®‰è£…å¸è½½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€å®‰è£…å¸è½½"}},[s._v("#")]),s._v(" äºŒã€å®‰è£…å¸è½½")]),s._v(" "),t("p",[t("code",[s._v("Compose")]),s._v(" æ”¯æŒ Linuxã€macOSã€Windows10 ä¸‰å¤§å¹³å°ã€‚")]),s._v(" "),t("p",[s._v("Linux å®‰è£…æ–¹å¼ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" https://github.com/docker/compose/releases/download/1.24.1/docker-compose-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/bin/docker-compose\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])])]),t("blockquote",[t("p",[s._v("ğŸ”” è¯¦æƒ…è¯·å‚è€ƒï¼š"),t("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Install Docker Compose"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"ä¸‰ã€å¿«é€Ÿå…¥é—¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€å¿«é€Ÿå…¥é—¨"}},[s._v("#")]),s._v(" ä¸‰ã€å¿«é€Ÿå…¥é—¨")]),s._v(" "),t("h3",{attrs:{id:"web-åº”ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-åº”ç”¨"}},[s._v("#")]),s._v(" web åº”ç”¨")]),s._v(" "),t("p",[s._v("æ–°å»ºæ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥ç›®å½•ä¸­ç¼–å†™ "),t("code",[s._v("app.py")]),s._v(" æ–‡ä»¶")]),s._v(" "),t("div",{staticClass:"language-python extra-class"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" flask "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Flask\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" redis "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Redis\n\napp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Flask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__name__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nredis "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redis'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hello")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("incr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hits'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello World! è¯¥é¡µé¢å·²è¢«è®¿é—® {} æ¬¡ã€‚\\n'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"__main__"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" debug"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" Dockerfile")]),s._v(" "),t("p",[s._v("ç¼–å†™ "),t("code",[s._v("Dockerfile")]),s._v(" æ–‡ä»¶ï¼Œå†…å®¹ä¸º")]),s._v(" "),t("div",{staticClass:"language-docker extra-class"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" python:3.6-alpine")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" . /code")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /code")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" pip install redis flask")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" ["),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app.py"')]),s._v("]")]),s._v("\n")])])]),t("h3",{attrs:{id:"docker-compose-yml"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml"}},[s._v("#")]),s._v(" docker-compose.yml")]),s._v(" "),t("p",[s._v("ç¼–å†™ "),t("code",[s._v("docker-compose.yml")]),s._v(" æ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯ Compose ä½¿ç”¨çš„ä¸»æ¨¡æ¿æ–‡ä»¶ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("web")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5000:5000"')]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis:alpine"')]),s._v("\n")])])]),t("h3",{attrs:{id:"è¿è¡Œ-compose-é¡¹ç›®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¿è¡Œ-compose-é¡¹ç›®"}},[s._v("#")]),s._v(" è¿è¡Œ compose é¡¹ç›®")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" up\n")])])]),t("p",[s._v("æ­¤æ—¶è®¿é—®æœ¬åœ° "),t("code",[s._v("5000")]),s._v(" ç«¯å£ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œè®¡æ•°å°±ä¼šåŠ  1ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å››ã€å‘½ä»¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€å‘½ä»¤"}},[s._v("#")]),s._v(" å››ã€å‘½ä»¤")]),s._v(" "),t("blockquote",[t("p",[s._v("ğŸ”” è¯·å‚è€ƒï¼š")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.docker.com/compose/reference/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Compose å®˜æ–¹å‘½ä»¤è¯´æ˜æ–‡æ¡£"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://yeasy.gitbooks.io/docker_practice/content/compose/commands.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Compose å‘½ä»¤è¯´æ˜ä¸­æ–‡æ–‡æ¡£"),t("OutboundLink")],1)])])]),s._v(" "),t("h2",{attrs:{id:"äº”ã€æ¨¡æ¿æ–‡ä»¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äº”ã€æ¨¡æ¿æ–‡ä»¶"}},[s._v("#")]),s._v(" äº”ã€æ¨¡æ¿æ–‡ä»¶")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("docker-compose.yml")]),s._v(" æ–‡ä»¶æ˜¯ Docker Compose çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå…¶ä½œç”¨ç±»ä¼¼äº Dockerfile å’Œ Dockerã€‚")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.docker.com/compose/env-file/",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker-compose.yml æ”¯æŒçš„é»˜è®¤ç¯å¢ƒå˜é‡å®˜æ–¹æ–‡æ¡£"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å®˜æ–¹")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/docker/compose",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker Compose Github"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker Compose å®˜æ–¹æ–‡æ¡£"),t("OutboundLink")],1)])])]),s._v(" "),t("li",[t("strong",[s._v("æ•™ç¨‹")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://yeasy.gitbooks.io/docker_practice/content/compose/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker â€” ä»å…¥é—¨åˆ°å®è·µ - Docker Compose é¡¹ç›®"),t("OutboundLink")],1)])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);